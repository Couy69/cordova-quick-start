webpackJsonp([1],{"+9YK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),s=a.n(r);window.videojs=a("sM+K"),videojs=videojs.default||videojs;var i={name:"video-player",props:{options:{type:Object,required:!0},start:{type:Number,default:function(){return 0}},playsinline:{type:Boolean,default:function(){return!1}},customEventName:{type:String,default:function(){return"statechanged"}}},mounted:function(){this.player||this.initialize()},beforeDestroy:function(){this.player&&this.dispose()},methods:{initialize:function(){var e=this;this.player=null;var t=s()({autoplay:!1,controls:!0,preload:"auto",fluid:!1,muted:!1,width:"100%",height:"360",language:"en",controlBar:{remainingTimeDisplay:!1,playToggle:{},progressControl:{},fullscreenToggle:{},volumeMenuButton:{inline:!1,vertical:!0}},techOrder:["html5"],plugins:{}},this.options),a=this.playsinline;a&&(this.$el.children[0].setAttribute("playsinline",a),this.$el.children[0].setAttribute("webkit-playsinline",a));var r=function(t,a){if(t&&e.$emit(t,e.player),a){var r={};r[t]=a,e.$emit(e.customEventName,r)}};t.plugins&&delete t.plugins.__ob__,this.player=videojs(this.$el.children[0],t,function(){var t=this;e.$emit("ready",e.player);for(var a=["loadeddata","canplay","canplaythrough","play","pause","waiting","playing","ended","error"],s=0;s<a.length;s++)!function(e){t.on(e,function(){r(e,!0)})}(a[s]);this.on("timeupdate",function(){r("timeupdate",this.currentTime())})})},dispose:function(){if(this.player&&videojs){if("Flash"!==this.player.techName_&&this.player.pause&&this.player.pause(),videojs(this.$el.children[0]).dispose(),!this.$el.children.length){var e=document.createElement("video");e.className="video-js",this.$el.appendChild(e)}this.player=null}}},watch:{options:{deep:!0,handler:function(e,t){this.dispose(),e&&e.sources&&e.sources.length&&this.initialize()}}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"video-player"},[t("video",{staticClass:"video-js"})])}]},n=a("VU/8")(i,o,!1,null,null,null);t.default=n.exports},"/4G7":function(e,t){},"/Bka":function(e,t){},0:function(e,t){},"1oTD":function(e,t){},"2hJ8":function(e,t){},"4Uwr":function(e,t,a){e.exports=a.p+"static/img/logo.9389317.jpg"},"5LIk":function(e,t){},AvQS:function(e,t){},FCCo:function(e,t){},I59K:function(e,t){},MwQe:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),s=a("Dd8w"),i=a.n(s),o=a("NYxO"),n={name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0,theme:this.$store.state.sidebar.theme}},methods:i()({reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}},Object(o.b)({changeTheme:"CHANGETHEME"})),created:function(){switch(localStorage.getItem("ci_theme")){case"default":this.changeTheme("default");break;case"simple":this.changeTheme("simple");break;case"dark":this.changeTheme("dark")}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:[this.$store.state.sidebar.theme],attrs:{id:"app"}},[this.isRouterAlive?t("router-view"):this._e()],1)},staticRenderFns:[]};var c=a("VU/8")(n,l,!1,function(e){a("lrHp")},null,null).exports,m=a("/ocq"),u={data:function(){return{menus:[{name:"摄像头初始化",path:"/view/cameraInitialization",icon:"iconfont icon-chushihua"},{name:"摄像头编排",path:"/view/cameraLayout",icon:"iconfont icon-bianpai"},{name:"算法配置",path:"/view/arithmeticSetting",icon:"iconfont icon-zhinengsuanfa"},{name:"定时任务",path:"/view/timeMacro",icon:"iconfont icon-timer"},{name:"告警记录",path:"/view/alarmLog",icon:"iconfont icon-warning"},{name:"视频缩放",path:"/view/pictureSynthesis",icon:"iconfont icon-biaodian"},{name:"用户管理",path:"/view/userManagement",icon:"iconfont icon-yonghuguanli"},{name:"角色管理",path:"/view/roleManagement",icon:"iconfont icon-jiaoseguanli"},{name:"定位",path:"/view/mapLocation",icon:"el-icon-location-outline"}]}},methods:{hiddenSideBar:function(){window.innerWidth<=768&&this.$store.commit("changeIsCollapse")}},computed:{},components:{},created:function(){},mounted:function(){}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sideBar fullHeight"},[a("div",{staticClass:"sideHeader"},[a("label",{staticClass:"header-hidden-click hidden-sm-and-up",on:{click:function(t){e.$store.commit("changeIsCollapse")}}},[e.$store.state.sidebar.isCollapse?a("i",{staticClass:"el-icon-close hidden-sm-and-up"}):e._e()])]),e._v(" "),a("el-menu",{staticClass:"asideList",attrs:{collapse:!1,"collapse-transition":!1,router:"","default-active":e.$route.path,"text-color":"#a8e3e2"}},[e._l(e.menus,function(t){return[t.children?a("el-submenu",{key:t.path,attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._v(" "),e._l(t.children,function(t,r){return a("el-menu-item",{key:r,attrs:{index:t.path}},[a("i",{class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])})],2):a("el-menu-item",{key:t.path,attrs:{index:t.path},on:{click:e.hiddenSideBar}},[a("i",{class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])]})],2)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("t0vD")},"data-v-96fcd60c",null).exports,h=a("NC6I"),f=a.n(h),v={data:function(){var e=this;return{hiddenService:!0,loginName:"",changePasswordOpen:!1,passwordFrom:{loginName:"",oldPassword:"",newPassword:"",confirmPassword:""},passRules:{oldPassword:[{required:!0,message:"请输入旧密码"}],newPassword:[{required:!0,message:"请输入新密码"}],confirmPassword:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.passwordFrom.newPassword?r(new Error("两次输入密码不一致!")):r()}},{required:!0}]}}},methods:i()({},Object(o.b)({changeTheme:"CHANGETHEME"}),{handleTheme:function(e){switch(e){case"default":this.changeTheme("default");break;case"simple":this.changeTheme("simple");break;case"dark":this.changeTheme("dark")}},handleCommand:function(e){var t=this;"startService"==e&&this.$api.pubApi.get("/substation/camera/startServer",{},function(e){console.log(e),t.$toast("服务启动成功","success"),t.hiddenService=!1}),"safeOut"==e&&this.$router.push({path:"/view/login/login"}),"changePassword"==e&&(this.passwordFrom.loginName=this.loginName,console.log(this.passwordFrom),this.changePasswordOpen=!0)},passwordConfirm:function(){var e=this;this.$refs.passwordRef.validate(function(t){t&&e.$api.pubApi.post("/projectmanage/user/update_password",{loginName:e.passwordFrom.loginName,password:f()(e.passwordFrom.oldPassword),newPassword:f()(e.passwordFrom.newPassword)},function(t){console.log(t),t.data.success?(e.$toast(t.data.msg,"success"),e.changePasswordOpen=!1,e.$router.push({path:"/login/login"})):e.$toast(t.data.msg,"warning")})})},alarmLog:function(){this.$router.push("/view/alarmLog")},changeIsCollapse:function(){this.$store.commit("changeIsCollapse")}}),computed:{flag:function(){return this.$store.state.alarm.flag}},components:{},created:function(){},mounted:function(){}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topBar"},[a("div",{staticClass:"fl"},[a("label",{staticClass:"header-hidden-click hidden-sm-and-up",on:{click:e.changeIsCollapse}},[a("i",{staticClass:"changeIcon",class:{"el-icon-d-arrow-right":e.$store.state.sidebar.isCollapse,"el-icon-d-arrow-left":!e.$store.state.sidebar.isCollapse}})]),e._v(" "),e.flag?a("span",{staticClass:"notice",attrs:{behavior:"slide",direction:"left"},on:{click:e.alarmLog}},[e._v("摄像头捕捉到照片，点击可查看详情")]):e._e()]),e._v(" "),a("div",{staticClass:"fr"},[a("el-dropdown",{staticClass:"fl",attrs:{trigger:"click",size:"small"},on:{command:e.handleTheme}},[a("div",{staticClass:"user"},[a("span",[e._v("主题选择")]),e._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"default"}},[e._v("默认主题")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"simple"}},[e._v("简约主题")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"dark"}},[e._v("深色主题")])],1)],1),e._v(" "),e._m(0),e._v(" "),a("el-dropdown",{staticClass:"fl",attrs:{trigger:"click",size:"small"},on:{command:e.handleCommand}},[a("div",{staticClass:"user"},[a("span",[e._v(e._s(e.loginName))]),e._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.hiddenService?a("el-dropdown-item",{attrs:{command:"startService"}},[e._v("启动服务")]):e._e(),e._v(" "),a("el-dropdown-item",{attrs:{command:"safeOut"}},[e._v("安全退出")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"changePassword"}},[e._v("修改密码")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.changePasswordOpen,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.changePasswordOpen=t}}},[a("el-form",{ref:"passwordRef",attrs:{model:e.passwordFrom,"label-width":"80px",size:"small",rules:e.passRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录名"}},[a("el-input",{attrs:{disabled:"",placeholder:""},model:{value:e.passwordFrom.loginName,callback:function(t){e.$set(e.passwordFrom,"loginName",t)},expression:"passwordFrom.loginName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入旧密码"},model:{value:e.passwordFrom.oldPassword,callback:function(t){e.$set(e.passwordFrom,"oldPassword",t)},expression:"passwordFrom.oldPassword"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.passwordFrom.newPassword,callback:function(t){e.$set(e.passwordFrom,"newPassword",t)},expression:"passwordFrom.newPassword"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再输入一次新密码"},model:{value:e.passwordFrom.confirmPassword,callback:function(t){e.$set(e.passwordFrom,"confirmPassword",t)},expression:"passwordFrom.confirmPassword"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnDarkGreen",attrs:{size:"small"},on:{click:e.passwordConfirm}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.changePasswordOpen=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("img",{attrs:{src:a("4Uwr")}})])}]};var b={data:function(){return{}},methods:{showAlarm:function(){this.$store.dispatch("getAlarm")},closeAlarm:function(){this.$store.commit("triggerDialog",!1)}},computed:{flag:{get:function(){return this.$store.state.alarm.flag},set:function(e){this.$store.state.alarm.flag=e}},imgSrc:function(){var e=this.$store.state.alarm.imgSrc;return console.log(e),e[0]?e[0].filename:""}},components:{sideBar:p,topBar:a("VU/8")(v,g,!1,function(e){a("/Bka")},"data-v-e8e0a0c2",null).exports},created:function(){},mounted:function(){this.showAlarm()}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fullHeight"},[a("el-container",{staticClass:"fullHeight"},[a("transition",{attrs:{name:"menuSlide"}},[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.sidebar.isCollapse,expression:"$store.state.sidebar.isCollapse"}],staticClass:"sideBar show-sm-and-up",attrs:{width:"auto"}},[a("side-bar")],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{position:"relative","box-shadow":"gray 2px 0 3px"}},[a("top-bar")],1),e._v(" "),a("el-main",{staticClass:"mainBgc"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("router-view")],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{center:"","close-on-click-modal":!1,title:"警报",visible:e.flag},on:{close:e.closeAlarm,"update:visible":function(t){e.flag=t}}},[a("img",{staticStyle:{width:"90%",margin:"0 auto",display:"block"},attrs:{src:e.imgSrc,alt:"警报图片"}}),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.flag=!1}}},[e._v("关闭")])],1)])],1)],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(b,y,!1,function(e){a("AvQS")},"data-v-398040f6",null).exports,w={url:"http://192.168.1.12:7527",serverUrl:"http://192.168.1.12:7527",alarmUrl:"http://192.168.1.12:7527"},C={data:function(){return{initialized:!1,playerOptions:{overNative:!0,autoplay:!0,controls:!0,techOrder:["flash"],sourceOrder:!0,fluid:!0,flash:{swf:"/static/media/video-js.swf"},sources:[{type:"rtmp/mp4",src:""}],poster:"/static/logo.jpg",controlBar:{timeDivider:!1,durationDisplay:!1,progressControl:!1,customControlSpacer:!0,fullscreenToggle:!0}},searchFrom:{cameraNumber:""},isHidden:!1,loading:!1,uploadFlag:!1,cameraData:[],videoSrc:"",pid:"",downloadExcel:w.url+"/substation/camera/import/template",excelUpload:w.url+"/substation/camera/import",Textcenter:{"text-align":"center"},pictureUrl:"",cameraTitle:"",cameraOpen:!1,cameraDetailOpen:!1,currentCamera:[],previewOpen:!1,previewId:"",previewluserId:"",wayNum:"",cameraFrom:{cameraName:"",id:"",cameraIp:"",cameraPort:"",cameraCode:"",cameraModel:"",cameraNum:"",username:"",password:""},previewFrom:{cameraNum:""},previewRules:{cameraNum:[{required:!0,message:"请输入摄像头编号"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a(new Error("只能输入非负整数"))}}]},rotateParameter:{cameraIp:"",username:"",password:"",channlsNo:"",luserId:"",cameraPort:""},cameraRules:{cameraName:[{required:!1}],cameraIp:[{required:!0,message:"此项必填"},{validator:function(e,t,a){/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(t)?a():a(new Error("请输入正确的ip地址"))}}],cameraPort:[{required:!0,message:"此项必填"},{validator:function(e,t,a){/^[0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5]$/.test(t)?a():a(new Error("请输入正确的端口号"))}}],cameraCode:[{required:!1}],cameraModel:[{required:!0,message:"此项必填"}],cameraNum:[{required:!1}],username:[{required:!0,message:"此项必填"}],password:[{required:!0,message:"此项必填"}]},cameraList:{total:0,currentPage:1,pageSize:10}}},methods:{getDetail:function(e){this.currentCamera=e,this.cameraDetailOpen=!0},goPicture:function(e){console.log(e,"当前校验摄像头信息"),this.$router.push({name:"picturePunctuation",params:{item:e}})},queryCamera:function(){var e=this;this.$api.pubApi.get("/substation/v2/camera/findPageList",{pageNo:this.cameraList.currentPage,pageSize:this.cameraList.pageSize,cameraNum:this.searchFrom.cameraNumber},function(t){console.log(t),e.cameraData=t.data.data.items,e.cameraList.total=t.data.data.totalNum})},reloadPreview:function(){""!=this.pictureUrl&&(this.playerOptions.sources[0].src="",this.playerOptions.sources[0].src=this.pictureUrl,this.playerOptions.autoplay=!0,console.log(this.pictureUrl))},onPlayerReadied:function(){this.initialized||(this.initialized=!0)},onTimeupdate:function(e){console.log("currentTime",e.cache_.currentTime)},addCamera:function(){var e=this;this.cameraFrom={cameraName:"",id:"",cameraIp:"",cameraPort:"",cameraCode:"",cameraModel:"",cameraNum:""},this.$nextTick(function(){e.$refs.cameraRef.clearValidate()}),this.cameraTitle="新增摄像头",this.isHidden=!0,this.cameraOpen=!0},editCamera:function(e){this.cameraFrom.cameraName=e.cameraName,this.cameraFrom.id=e.id,this.cameraFrom.cameraIp=e.cameraIp,this.cameraFrom.cameraPort=e.cameraPort,this.cameraFrom.cameraCode=e.cameraCode,this.cameraFrom.cameraModel=e.cameraModel,this.cameraFrom.cameraNum=e.cameraNum,this.cameraFrom.username=e.username,this.cameraTitle="编辑摄像头",this.isHidden=!1,this.cameraOpen=!0},preview:function(e){var t=this;this.rotateParameter.cameraPort=e.cameraPort,this.rotateParameter.cameraIp=e.cameraIp,this.rotateParameter.username=e.username,this.rotateParameter.password=e.password,this.loading=!0,this.previewId=e.id,this.previewFrom.cameraNum=e.cameraNum,this.$api.pubApi.post("/substation/v2/getVideo",{id:e.id},function(e){console.log(e),t.pictureUrl=e.data,t.loading=!1,t.playerOptions.sources[0].src="",t.playerOptions.sources[0].src=t.pictureUrl,t.playerOptions.autoplay=!0,t.previewOpen=!0})},getPreset:function(){this.$api.pubApi.post("/substation/camera/set_preset",{ip:this.rotateParameter.cameraIp,username:this.rotateParameter.username,password:this.rotateParameter.password,port:this.rotateParameter.cameraPort},function(e){console.log(e)})},reset:function(){this.$api.pubApi.post("/substation/v2/camera/gotoPresetPoint",{ip:this.rotateParameter.cameraIp,username:this.rotateParameter.username,password:this.rotateParameter.password,port:this.rotateParameter.cameraPort},function(e){console.log(e)})},rotate:function(e){this.$api.pubApi.post("/substation/v2/camera/adjustOrientation",{ip:this.rotateParameter.cameraIp,username:this.rotateParameter.username,password:this.rotateParameter.password,position:e},function(e){console.log(e)})},closeThen:function(){this.playerOptions.autoplay=!1},savePreview:function(){var e=this;this.$refs.previewRef.validate(function(t){t&&e.$postConfirm("/substation/v2/camera/update",{id:e.previewId,cameraNum:e.previewFrom.cameraNum},function(t){console.log(t),t.data.success?(e.previewOpen=!1,e.queryCamera(),e.$toast(t.data.msg,"success")):e.$toast(t.data.msg,"warning")})})},cameraSave:function(){var e=this;this.$refs.cameraRef.validate(function(t){t&&("新增摄像头"==e.cameraTitle?e.$postConfirm("/substation/v2/camera/save",{cameraName:e.cameraFrom.cameraName,cameraIp:e.cameraFrom.cameraIp,cameraPort:e.cameraFrom.cameraPort,cameraCode:e.cameraFrom.cameraCode,cameraModel:e.cameraFrom.cameraModel,cameraNum:e.cameraFrom.cameraNum,username:e.cameraFrom.username,password:e.cameraFrom.password},function(t){t.data.flag?(e.cameraOpen=!1,e.queryCamera(),e.$toast(t.data.msg,"success")):e.$toast(t.data.msg,"warning")}):e.$postConfirm("/substation/v2/camera/update",{cameraName:e.cameraFrom.cameraName,id:e.cameraFrom.id,cameraIp:e.cameraFrom.cameraIp,cameraPort:e.cameraFrom.cameraPort,cameraCode:e.cameraFrom.cameraCode,cameraModel:e.cameraFrom.cameraModel,cameraNum:e.cameraFrom.cameraNum,username:e.cameraFrom.username},function(t){t.data.flag?(e.cameraOpen=!1,e.queryCamera(),e.$toast(t.data.msg,"success")):e.$toast(t.data.msg,"warning")}))})},delCamera:function(e){var t=this;this.$postConfirm("/substation/v2/camera/delete",{id:e.id},function(e){e.data.flag&&(t.queryCamera(),t.$toast(e.data.msg,"success"))})},startCamera:function(e){var t=this;this.$api.pubApi.post("/substation/v2/camera/start",{id:e.id},function(e){t.queryCamera(),e.data.flag?t.$toast(e.data.msg,"success"):t.$toast(e.data.msg,"warning")})},endCamera:function(e){var t=this;this.$api.pubApi.post("/substation/v2/camera/stop",{id:e.id},function(e){t.queryCamera(),e.data.flag?t.$toast(e.data.msg,"success"):t.$toast(e.data.msg,"warning")})},cameraPageSizeM:function(e){this.cameraList.pageSize=e,this.queryCamera()},cameraCurrentPageM:function(e){this.cameraList.currentPage=e,this.queryCamera()},openUploadExcel:function(){this.uploadFlag=!0},uploadServer:function(){this.$refs.upload.submit()},excelUploadScuess:function(e,t,a){console.log(e,t,a,this),e.success?(this.$refs.upload.clearFiles(),this.uploadFlag=!1,this.queryCamera(),this.$toast(e.msg,"success")):this.$toast(e.msg,"warning")}},computed:{player:function(){return this.$refs.videoPlayer.player}},components:{},created:function(){},mounted:function(){var e=this;this.queryCamera(),window.addEventListener("beforeunload",function(t){return e.closeThen(t)})}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"摄像头编号"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入摄像头编号"},on:{clear:e.queryCamera},model:{value:e.searchFrom.cameraNumber,callback:function(t){e.$set(e.searchFrom,"cameraNumber",t)},expression:"searchFrom.cameraNumber"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btnGray",attrs:{size:"small",icon:"el-icon-search"},on:{click:e.queryCamera}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addCamera}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"fr"},[a("a",{attrs:{href:e.downloadExcel}},[a("el-button",{staticClass:"btnYellow",attrs:{size:"small",icon:"el-icon-download"}},[e._v("下载模板")])],1),e._v(" "),a("el-button",{staticClass:"btnGreen",attrs:{size:"small",icon:"el-icon-upload2"},on:{click:e.openUploadExcel}},[e._v("导入Excel")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer hidden-xs-only"},[a("el-table",{attrs:{data:e.cameraData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"摄像头编号",prop:"cameraNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),e._v(" "),a("el-table-column",{attrs:{label:"摄像头型号",prop:"cameraModel"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备名称",prop:"cameraName"}}),e._v(" "),a("el-table-column",{attrs:{label:"机器编码",prop:"cameraCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"网络ip地址",prop:"cameraIp"}}),e._v(" "),a("el-table-column",{attrs:{label:"端口号",prop:"cameraPort"}}),e._v(" "),"style-simple"!=e.$store.state.sidebar.theme?a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return"style-simple"!=e.$store.state.sidebar.theme?[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:function(a){e.goPicture(t.row)}}},[e._v("校准")]),e._v(" "),a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.editCamera(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:function(a){e.preview(t.row)}}},[e._v("预览")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(a){e.delCamera(t.row)}}},[e._v("删除")]),e._v(" "),"off"==t.row.onOff?a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:function(a){e.startCamera(t.row)}}},[e._v("开启采集")]):a("el-button",{staticClass:"btnGray",attrs:{type:"info",size:"small"},on:{click:function(a){e.endCamera(t.row)}}},[e._v("结束采集")])]:void 0}}])}):e._e(),e._v(" "),"style-simple"==e.$store.state.sidebar.theme?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return"style-simple"==e.$store.state.sidebar.theme?[a("el-dropdown",{staticStyle:{"text-align":"center"},attrs:{trigger:"click",size:"small"}},[a("div",{staticClass:"user"},[a("i",{staticClass:"el-icon-more"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){e.goPicture(t.row)}}},[e._v("校准")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.editCamera(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.preview(t.row)}}},[e._v("预览")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.delCamera(t.row)}}},[e._v("删除")]),e._v(" "),"off"==t.row.onOff?a("el-dropdown-item",{nativeOn:{click:function(a){e.startCamera(t.row)}}},[e._v("开启采集")]):a("el-dropdown-item",{nativeOn:{click:function(a){e.endCamera(t.row)}}},[e._v("结束采集")])],1)],1)]:void 0}}])}):e._e()],1)],1),e._v(" "),a("el-main",{staticClass:"mainTableContainer hidden-sm-and-up"},[a("el-table",{attrs:{data:e.cameraData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"摄像头编号",prop:"cameraNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备名称",prop:"cameraName"}}),e._v(" "),a("el-table-column",{attrs:{label:"机器编码",prop:"cameraCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:function(a){e.getDetail(t.row)}}},[e._v("详情")])]}}])})],1)],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.cameraList.total,"current-page":e.cameraList.currentPage,"page-size":e.cameraList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.cameraCurrentPageM,"size-change":e.cameraPageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.cameraTitle,visible:e.cameraOpen,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.cameraOpen=t}}},[a("el-form",{ref:"cameraRef",staticClass:"xs100",attrs:{"label-width":"120px","status-icon":"",model:e.cameraFrom,rules:e.cameraRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备名称",prop:"cameraName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.cameraFrom.cameraName,callback:function(t){e.$set(e.cameraFrom,"cameraName",t)},expression:"cameraFrom.cameraName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机器编码",prop:"cameraCode"}},[a("el-input",{attrs:{size:"small"},model:{value:e.cameraFrom.cameraCode,callback:function(t){e.$set(e.cameraFrom,"cameraCode",t)},expression:"cameraFrom.cameraCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"端口号",prop:"cameraPort"}},[a("el-input",{attrs:{size:"small"},model:{value:e.cameraFrom.cameraPort,callback:function(t){e.$set(e.cameraFrom,"cameraPort",t)},expression:"cameraFrom.cameraPort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"网络ip地址",prop:"cameraIp"}},[a("el-input",{attrs:{size:"small"},model:{value:e.cameraFrom.cameraIp,callback:function(t){e.$set(e.cameraFrom,"cameraIp",t)},expression:"cameraFrom.cameraIp"}})],1)],1)],1),e._v(" "),a("el-row",[e.isHidden?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{size:"small"},model:{value:e.cameraFrom.username,callback:function(t){e.$set(e.cameraFrom,"username",t)},expression:"cameraFrom.username"}})],1)],1):e._e(),e._v(" "),e.isHidden?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",size:"small"},model:{value:e.cameraFrom.password,callback:function(t){e.$set(e.cameraFrom,"password",t)},expression:"cameraFrom.password"}})],1)],1):e._e()],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"摄像头型号",prop:"cameraModel"}},[a("el-input",{attrs:{size:"small"},model:{value:e.cameraFrom.cameraModel,callback:function(t){e.$set(e.cameraFrom,"cameraModel",t)},expression:"cameraFrom.cameraModel"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.cameraSave}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.cameraOpen=!1}}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"摄像头详情",visible:e.cameraDetailOpen,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.cameraDetailOpen=t}}},[a("el-form",{ref:"cameraRef",attrs:{"label-width":"120px","status-icon":"",model:e.currentCamera,rules:e.cameraRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备名称",prop:"cameraName"}},[a("p",[e._v(e._s(e.currentCamera.cameraName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机器编码",prop:"cameraCode"}},[a("p",[e._v(e._s(e.currentCamera.cameraCode))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"端口号",prop:"cameraPort"}},[a("p",[e._v(e._s(e.currentCamera.cameraPort))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"网络ip地址",prop:"cameraIp"}},[a("p",[e._v(e._s(e.currentCamera.cameraIp))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("p",[e._v(e._s(e.currentCamera.username))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"摄像头型号",prop:"cameraModel"}},[a("p",[e._v(e._s(e.currentCamera.cameraModel))])])],1)],1)],1),e._v(" "),a("span",{staticClass:"chi-btn-mr1",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:function(t){e.goPicture(e.currentCamera)}}},[e._v("校准")]),e._v(" "),a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(t){e.editCamera(e.currentCamera)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:function(t){e.preview(e.currentCamera)}}},[e._v("预览")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(t){e.delCamera(e.currentCamera)}}},[e._v("删除")]),e._v(" "),"off"==e.currentCamera.onOff?a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:function(t){e.startCamera(e.currentCamera)}}},[e._v("开启采集")]):a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){e.endCamera(e.currentCamera)}}},[e._v("结束采集")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{width:"70%",title:"预览",center:"","close-on-click-modal":!1,visible:e.previewOpen},on:{close:e.closeThen,"update:visible":function(t){e.previewOpen=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{xs:24,md:14,sm:14,"element-loading-text":"视频拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("el-card",[a("div",[a("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{options:e.playerOptions},on:{ready:e.onPlayerReadied}})],1)])],1),e._v(" "),a("el-col",{attrs:{xs:24,md:10,sm:10}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("云台")])]),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rotate("leftUp")}}},[a("i",{staticClass:"el-icon-caret-top leftTop"})]),e._v(" "),a("el-button",{staticClass:"el-icon-caret-top",attrs:{size:"mini"},on:{click:function(t){e.rotate("upper")}}}),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rotate("rightUp")}}},[a("i",{staticClass:"el-icon-caret-top rightTop"})])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{staticClass:"el-icon-caret-left",attrs:{size:"mini"},on:{click:function(t){e.rotate("left")}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.reset}}),e._v(" "),a("el-button",{staticClass:"el-icon-caret-right",attrs:{size:"mini"},on:{click:function(t){e.rotate("right")}}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rotate("leftDown")}}},[a("i",{staticClass:"el-icon-caret-bottom leftBottom"})]),e._v(" "),a("el-button",{staticClass:"el-icon-caret-bottom",attrs:{size:"mini"},on:{click:function(t){e.rotate("down")}}}),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rotate("rightDown")}}},[a("i",{staticClass:"el-icon-caret-bottom rightBottom"})])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.rotate("zoomIn")}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",size:"mini",disabled:""}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-minus"},on:{click:function(t){e.rotate("zoomOut")}}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-d-arrow-left"},on:{click:function(t){e.rotate("focusNear")}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-view",size:"mini",disabled:""}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-d-arrow-right"},on:{click:function(t){e.rotate("focusFar")}}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.rotate("irisOpen")}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-news",size:"mini",disabled:""}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-minus"},on:{click:function(t){e.rotate("irisClose")}}})],1)],1)],1)],1)],1)],1)]),e._v(" "),a("el-card",{attrs:{"body-style":{"padding-bottom":"0px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("摄像头编号")])]),e._v(" "),a("div",[a("el-form",{ref:"previewRef",attrs:{model:e.previewFrom,rules:e.previewRules}},[a("el-form-item",{attrs:{prop:"cameraNum"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"此项必填",size:"small"},model:{value:e.previewFrom.cameraNum,callback:function(t){e.$set(e.previewFrom,"cameraNum",t)},expression:"previewFrom.cameraNum"}})],1)],1)],1)])],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:e.reloadPreview}},[e._v("刷新")]),e._v(" "),a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.savePreview}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.previewOpen=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"导入Excel",visible:e.uploadFlag,center:"","close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(t){e.uploadFlag=t}}},[a("el-upload",{ref:"upload",attrs:{limit:1,action:e.excelUpload,drag:"","auto-upload":!1,"on-success":e.excelUploadScuess}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n        "),a("em",[e._v("点击上传")])])]),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.uploadServer}},[e._v("上传")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.uploadFlag=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var F=a("VU/8")(C,k,!1,function(e){a("FCCo")},"data-v-5b5ed781",null).exports,P={data:function(){return{searchFrom:{cameraNumber:""},layoutData:[],Textcenter:{"text-align":"center"},layoutFrom:{arrangementName:"",id:"",arithmeticId:""},layoutRules:{arrangementName:[{required:!0,message:"此项必填"}],arithmeticId:[{required:!0,message:"此项必填"}]},cameralayoutList:{total:0,currentPage:1,pageSize:10},LayoutTitle:"",LayoutOpen:!1,algorithmLits:[]}},methods:{queryLayout:function(){var e=this;this.$api.pubApi.get("/substation/v2/arrangement/findPageList",{pageNo:this.cameralayoutList.currentPage,pageSize:this.cameralayoutList.pageSize,arrangementName:this.searchFrom.cameraNumber},function(t){e.layoutData=t.data.data.items,e.cameralayoutList.total=t.data.totalNum})},queryAlgorithm:function(){var e=this;this.$api.pubApi.post("/substation/v2/arithmetic/allList",{},function(t){e.algorithmLits=t.data.data.items})},addLayout:function(){var e=this;this.queryAlgorithm(),this.layoutFrom={id:"",arrangementName:""},this.$nextTick(function(){e.$refs.layoutRef.clearValidate()}),this.LayoutTitle="新增编排",this.LayoutOpen=!0},editLayout:function(e){this.queryAlgorithm(),this.layoutFrom.id=e.id,this.layoutFrom.arrangementName=e.name,this.layoutFrom.arithmeticId=e.arithmeticId,this.LayoutTitle="编辑编排",this.LayoutOpen=!0},LayoutSave:function(){var e=this;this.$refs.layoutRef.validate(function(t){if(t){var a="";a=e.layoutFrom.id?"/substation/v2/arrangement/update":"/substation/v2/arrangement/save",e.$postConfirm(a,{name:e.layoutFrom.arrangementName,id:e.layoutFrom.id,arithmeticId:e.layoutFrom.arithmeticId},function(t){t.data.flag&&(e.LayoutOpen=!1,e.queryLayout(),e.$toast(t.data.msg,"success"))})}})},delLayout:function(e){var t=this;this.$postConfirm("/substation/v2/arrangement/delete",{id:e.id},function(e){e.data.flag&&(t.queryLayout(),t.$toast(e.data.msg,"success"))})},jumpNewPage:function(e){var t=e.id;this.$router.push({path:"/view/cameraLayoutDetail/"+t})},layoutLCurrentPageM:function(e){this.cameralayoutList.currentPage=e,this.queryLayout()},layoutPageSizeM:function(){this.cameralayoutList.pageSize=val,this.queryLayout()}},computed:{},components:{},created:function(){},mounted:function(){this.queryLayout()}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"宏"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入宏"},on:{clear:e.queryLayout},model:{value:e.searchFrom.cameraNumber,callback:function(t){e.$set(e.searchFrom,"cameraNumber",t)},expression:"searchFrom.cameraNumber"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btnGray",attrs:{size:"small",icon:"el-icon-search"},on:{click:e.queryLayout}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addLayout}},[e._v("新建")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer"},[a("el-table",{attrs:{data:e.layoutData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter},on:{"row-dblclick":e.jumpNewPage}},[a("el-table-column",{attrs:{label:"宏"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{color:"#1b67f6",cursor:"pointer"}},[e._v("\n          "+e._s(t.row.name)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.editLayout(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(a){e.delLayout(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.cameralayoutList.total,"current-page":e.cameralayoutList.currentPage,"page-size":e.cameralayoutList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.layoutLCurrentPageM,"size-change":e.layoutPageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{center:"","close-on-click-modal":!1,title:e.LayoutTitle,visible:e.LayoutOpen},on:{"update:visible":function(t){e.LayoutOpen=t}}},[a("el-form",{ref:"layoutRef",attrs:{inline:"",model:e.layoutFrom,"status-icon":"",rules:e.layoutRules}},[a("el-form-item",{attrs:{label:"宏",prop:"arrangementName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入宏命令"},model:{value:e.layoutFrom.arrangementName,callback:function(t){e.$set(e.layoutFrom,"arrangementName",t)},expression:"layoutFrom.arrangementName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"算法",prop:"arithmeticId"}},[a("el-select",{attrs:{placeholder:"请选择算法"},model:{value:e.layoutFrom.arithmeticId,callback:function(t){e.$set(e.layoutFrom,"arithmeticId",t)},expression:"layoutFrom.arithmeticId"}},e._l(e.algorithmLits,function(e){return a("el-option",{key:e.id,attrs:{label:e.arithmeticName,value:e.id}})}))],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.LayoutSave}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.LayoutOpen=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var z=a("VU/8")(P,x,!1,function(e){a("MwQe")},"data-v-6485697b",null).exports,S={data:function(){return{videoSrc:"",initialized:!1,playerOptions:{overNative:!0,autoplay:!0,controls:!0,techOrder:["flash"],sourceOrder:!0,fluid:!0,flash:{swf:"/static/media/video-js.swf"},sources:[{type:"rtmp/mp4",src:""}],poster:"/static/logo.jpg",controlBar:{timeDivider:!1,durationDisplay:!1,progressControl:!1,customControlSpacer:!0,fullscreenToggle:!0}},searchFrom:{prepositionName:""},cameraNumber:[],cmaeraId:"",presetPositionData:[],positionNum:"",Textcenter:{"text-align":"center"},pictureUrl:"",presetPositionFrom:{num:"",name:"",arrangementDetailId:"",positionNum:""},endedFlag:!0,loading:!1,presetPositionRules:{name:[{required:!0,message:"此项必填"}],num:[{required:!0,message:"此项必填"}]},camerapresetPositionList:{total:0,currentPage:1,pageSize:10},prepositionTitle:"",prepositionOpen:!1,videoFlag:!1,activeId:null,rotateParameter:{cameraIp:"",username:"",password:"",cameraPort:"",cameraNum:""},disabled:!0,disabledRest:!0,arrangementId:""}},methods:{onPlayerReadied:function(){this.initialized||(this.initialized=!0)},onTimeupdate:function(e){console.log("currentTime",e.cache_.currentTime)},querypresetPosition:function(){var e=this;console.log(this.arrangementId),this.$api.pubApi.post("/substation/v2/arrangement/detail/findPageList",{pageNo:this.camerapresetPositionList.currentPage,pageSize:this.camerapresetPositionList.pageSize,id:this.arrangementId,positionName:this.searchFrom.prepositionName},function(t){console.log(t),e.presetPositionData=t.data.data.items,e.camerapresetPositionList.total=t.data.total})},queryCamera:function(){var e=this;this.$api.pubApi.post("/substation/v2/camera/all/number",{cameraId:this.cameraId},function(t){e.cameraNumber=t.data.data.items})},selectCamera:function(e){var t=this;console.log(e),this.videoFlag=!0,this.activeId=e.id,this.cameraId=e.id,this.rotateParameter={cameraPort:e.cameraPort,cameraIp:e.cameraIp,username:e.username,password:e.password,cameraNum:e.cameraNum},this.cameraId?(this.closeThen(),this.$api.pubApi.post("/substation/v2/getVideo",{id:e.id},function(e){console.log(e),t.pictureUrl=e.data,t.loading=!1,t.playerOptions.sources[0].src="",t.playerOptions.sources[0].src=t.pictureUrl,t.playerOptions.autoplay=!0,t.previewOpen=!0})):this.$toast("请先选择摄像头编号","warning")},reloadPreview:function(){""!=this.pictureUrl&&(this.playerOptions.sources[0].src="",this.playerOptions.sources[0].src=this.pictureUrl,this.playerOptions.autoplay=!0)},reset:function(){this.$api.pubApi.post("/substation/v2/arrangement/detail/goto_preset_point",{ip:this.rotateParameter.cameraIp,username:this.rotateParameter.username,password:this.rotateParameter.password,port:this.rotateParameter.cameraPort},function(e){console.log(e)})},rotate:function(e){if(this.videoFlag=!0,!this.cameraId)return document.getElementById("video").src="",void this.$toast("请先选择摄像头编号","warning");this.$api.pubApi.post("/substation/v2/arrangement_detail/debugging_position",{ip:this.rotateParameter.cameraIp,username:this.rotateParameter.username,password:this.rotateParameter.password,port:this.rotateParameter.cameraPort,position:e},function(e){console.log(e)})},addpresetPosition:function(){var e=this;this.presetPositionFrom={name:"",arrangementDetailId:"",num:"",positionNum:""},this.cameraId="",this.activeId="",this.rotateParameter={cameraIp:"",username:"",password:"",cameraPort:"",cameraNum:""},this.$nextTick(function(){e.$refs.presetPositionRef.clearValidate()}),this.prepositionTitle="新增预位",this.queryCamera(),this.videoFlag=!1,this.loading=!1,this.disabled=!0,this.disabledRest=!0,this.prepositionOpen=!0},editpresetPosition:function(e){this.disabled=!0,this.disabledRest=!0,this.videoFlag=!1,this.loading=!1,this.activeId="",this.positionNum=e.positionNum,this.cameraId=e.cameraId,this.presetPositionFrom.arrangementDetailId=e.id,this.presetPositionFrom.positionNum=e.positionNum,this.presetPositionFrom.name=e.positionName,this.queryCamera(),this.prepositionTitle="编辑预位",this.prepositionOpen=!0},presetPositionSave:function(){var e=this;this.$refs.presetPositionRef.validate(function(t){if(t){var a="";a=e.presetPositionFrom.positionNum?"/substation/v2/arrangement/detail/update":"/substation/v2/arrangement/detail/save",e.$postConfirm(a,{arrangementId:e.arrangementId,id:e.presetPositionFrom.arrangementDetailId,cameraId:e.cameraId,positionName:e.presetPositionFrom.name,ip:e.rotateParameter.cameraIp,username:e.rotateParameter.username,password:e.rotateParameter.password,cameraNum:e.rotateParameter.cameraNum,port:e.rotateParameter.cameraPort},function(t){t.data.flag?(e.prepositionOpen=!1,e.$toast(t.data.msg,"success"),e.querypresetPosition()):e.$toast(t.data.msg,"warning")})}})},closeThen:function(){this.playerOptions.autoplay=!1},delpresetPosition:function(e){var t=this;this.$postConfirm("/substation/v2/arrangement/detail/delete",{id:e.id},function(e){e.data.flag&&(t.$toast(e.data.msg,"success"),t.querypresetPosition())})},presetPositionCurrentPageM:function(e){this.camerapresetPositionList.currentPage=e,this.querypresetPosition()},presetPositionPageSizeM:function(e){this.camerapresetPositionList.pageSize=e,this.querypresetPosition()}},computed:{player:function(){return this.$refs.videoPlayer.player}},components:{},created:function(){},mounted:function(){this.arrangementId=this.$route.params.id,this.querypresetPosition()}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{heigth:"100%"}},[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"预位名称"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入预位名称"},on:{clear:e.querypresetPosition},model:{value:e.searchFrom.prepositionName,callback:function(t){e.$set(e.searchFrom,"prepositionName",t)},expression:"searchFrom.prepositionName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btnGray",attrs:{size:"small",icon:"el-icon-search"},on:{click:e.querypresetPosition}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addpresetPosition}},[e._v("新建")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer"},[a("el-table",{attrs:{data:e.presetPositionData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"摄像头编号",prop:"cameraNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"预位编号",prop:"positionNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"预位名称",prop:"positionName"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.editpresetPosition(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(a){e.delpresetPosition(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.camerapresetPositionList.total,"current-page":e.camerapresetPositionList.currentPage,"page-size":e.camerapresetPositionList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.presetPositionCurrentPageM,"size-change":e.presetPositionPageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{width:"70%",center:"","close-on-click-modal":!1,title:e.prepositionTitle,visible:e.prepositionOpen},on:{close:e.closeThen,"update:visible":function(t){e.prepositionOpen=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{xs:12,md:14,sm:14,"element-loading-text":"视频拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.videoFlag,expression:"videoFlag"}]},[a("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{options:e.playerOptions},on:{ready:e.onPlayerReadied}})],1)],1),e._v(" "),a("el-col",{staticClass:"rotateStyle",attrs:{xs:12,md:10,sm:10}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("云台")])]),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("leftUp")}}},[a("i",{staticClass:"el-icon-caret-top leftTop"})]),e._v(" "),a("el-button",{staticClass:"el-icon-caret-top",attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("upper")}}}),e._v(" "),a("el-button",{attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("rightUp")}}},[a("i",{staticClass:"el-icon-caret-top rightTop"})])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{staticClass:"el-icon-caret-left",attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("left")}}}),e._v(" "),a("el-button",{attrs:{disabled:e.disabled,icon:"el-icon-refresh",size:"mini"},on:{click:function(t){e.reset()}}}),e._v(" "),a("el-button",{staticClass:"el-icon-caret-right",attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("right")}}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("leftDown")}}},[a("i",{staticClass:"el-icon-caret-bottom leftBottom"})]),e._v(" "),a("el-button",{staticClass:"el-icon-caret-bottom",attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("down")}}}),e._v(" "),a("el-button",{attrs:{disabled:e.disabled,size:"mini"},on:{click:function(t){e.rotate("rightDown")}}},[a("i",{staticClass:"el-icon-caret-bottom rightBottom"})])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.rotate("zoomIn")}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",size:"mini",disabled:""}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-minus"},on:{click:function(t){e.rotate("zoomOut")}}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-d-arrow-left"},on:{click:function(t){e.rotate("focusNear")}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-view",size:"mini",disabled:""}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-d-arrow-right"},on:{click:function(t){e.rotate("focusFar")}}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.rotate("irisOpen")}}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-news",size:"mini",disabled:""}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-minus"},on:{click:function(t){e.rotate("irisClose")}}})],1)],1)],1)],1)],1)],1)]),e._v(" "),a("el-card",{attrs:{"body-style":{"padding-bottom":"0px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("预位名称")])]),e._v(" "),a("div",[a("el-form",{ref:"presetPositionRef",attrs:{model:e.presetPositionFrom,rules:e.presetPositionRules}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"此项必填",size:"small"},model:{value:e.presetPositionFrom.name,callback:function(t){e.$set(e.presetPositionFrom,"name",t)},expression:"presetPositionFrom.name"}})],1)],1)],1)]),e._v(" "),a("el-row",{staticClass:"rotate"})],1)],1),e._v(" "),a("el-row",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("摄像头编号")])]),e._v(" "),a("div",{staticClass:"btnAll"},e._l(e.cameraNumber,function(t,r){return a("el-button",{key:r,staticClass:"btnItem",class:{blue:t.cameraId==e.activeId},attrs:{size:"mini"},on:{click:function(a){e.selectCamera(t)}}},[e._v("\n                "+e._s(t.cameraNum)+"\n              ")])}))])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:e.reloadPreview}},[e._v("刷新")]),e._v(" "),a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.presetPositionSave}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.prepositionOpen=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var N=a("VU/8")(S,$,!1,function(e){a("ZXhK")},"data-v-223adc41",null).exports,T=a("7t+N"),D=a.n(T),I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"任务名称"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入任务名称"},model:{value:e.searchFrom.taskName,callback:function(t){e.$set(e.searchFrom,"taskName",t)},expression:"searchFrom.taskName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btnGray",attrs:{size:"small",icon:"el-icon-search"},on:{click:e.queryTask}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addTask}},[e._v("新建")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer"},[a("el-table",{attrs:{data:e.taskData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"任务",prop:"arrangementName"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.editTask(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(a){e.delTask(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.taskList.total,"current-page":e.taskList.currentPage,"page-size":e.taskList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.taskCurrentPageM,"size-change":e.taskPageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{center:"","close-on-click-modal":!1,title:e.taskTitle,visible:e.taskOpen},on:{"update:visible":function(t){e.taskOpen=t}}},[a("el-form",{ref:"taskRef",attrs:{inline:"",model:e.taskFrom,size:"small",rules:e.taskRules}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:e.taskFrom.name,callback:function(t){e.$set(e.taskFrom,"name",t)},expression:"taskFrom.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"帧率",prop:"frameRate"}},[a("el-input",{attrs:{placeholder:"请输入帧率"},model:{value:e.taskFrom.frameRate,callback:function(t){e.$set(e.taskFrom,"frameRate",t)},expression:"taskFrom.frameRate"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.saveTask}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.taskOpen=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var L=a("VU/8")({data:function(){return{searchFrom:{taskName:""},taskData:[],Textcenter:{"text-align":"center"},taskList:{total:0,currentPage:1,pageSize:10},taskTitle:"",taskOpen:!1,taskFrom:{name:"",frameRate:""},taskRules:{name:[{required:!0,message:"此项必填"}],frameRate:[{required:!0,message:"此项必填"}]},count:1}},methods:{queryTask:function(){},addTask:function(){this.taskTitle="新增任务",this.taskOpen=!0},editTask:function(){this.taskTitle="编辑任务",this.taskOpen=!0},saveTask:function(){},delTask:function(){},taskCurrentPageM:function(){},taskPageSizeM:function(){}},computed:{},components:{},created:function(){},mounted:function(){}},I,!1,function(e){a("n3jj")},"data-v-fe097bb6",null).exports,O=a("pFYg"),R=a.n(O),q={data:function(){return{searchFrom:{cameraNumber:""},startDate:"",endDate:"",videoFlag:!1,loading:!1,cameraData:[],Textcenter:{"text-align":"center"},passagewayOpen:!1,passagewayArray:[],passagewayId:"",activeId:null,wayNum:"",cameraList:{total:0,currentPage:1,pageSize:10}}},methods:{queryCamera:function(){var e=this;this.$api.pubApi.get("/substation/camera/data",{pageNo:this.cameraList.currentPage,pageSize:this.cameraList.pageSize,cameraNum:this.searchFrom.cameraNumber},function(t){console.log(t),e.cameraData=t.data.rows,e.cameraList.total=t.data.total})},timeSlot:function(e){this.startDate="",this.endDate="",this.videoFlag=!1,this.passagewayId=e.cameraId,this.passagewayOpen=!0},showVideo:function(){var e=this;if(""!=this.startDate&&""!=this.endDate){this.loading=!0;var t=this.$dateFormat.dateFormat(this.startDate),a=this.$dateFormat.dateFormat(this.endDate),r=this.endDate-this.startDate;console.log(void 0===t?"undefined":R()(t),void 0===a?"undefined":R()(a)),console.log(this.formatDuring(r));var s=this.formatDuring(r);this.$toast("请等待"+s,"success"),this.videoFlag=!0,this.$api.pubApi.post("/substation/camera/get_time_video",{id:this.passagewayId,startTime:t,endTime:a},function(t){e.loading=!1,console.log(t),document.getElementById("video").src=t.data.picture},function(t){console.warn("Error in returning data"),e.loading=!1})}else this.$toast("请选择时间","warning")},formatDuring:function(e){return parseInt(e%864e5/36e5)+"小时:"+parseInt(e%36e5/6e4)+"分钟:"+e%6e4/1e3+"秒"},cameraPageSizeM:function(e){this.cameraList.pageSize=e,this.queryCamera()},cameraCurrentPageM:function(e){this.cameraList.currentPage=e,this.queryCamera()}},computed:{},components:{},created:function(){},mounted:function(){this.queryCamera()}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"摄像头编号"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入摄像头编号"},model:{value:e.searchFrom.cameraNumber,callback:function(t){e.$set(e.searchFrom,"cameraNumber",t)},expression:"searchFrom.cameraNumber"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btnGray",attrs:{clearable:"",size:"small",icon:"el-icon-search"},on:{click:e.queryCamera}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer",attrs:{height:"20px"}}),e._v(" "),a("el-main",{staticClass:"mainTableContainer"},[a("el-table",{attrs:{data:e.cameraData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"摄像头编号",prop:"cameraNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"摄像头型号",prop:"cameraModel"}}),e._v(" "),a("el-table-column",{attrs:{label:"机器编码",prop:"cameraCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"网络ip地址",prop:"cameraIp"}}),e._v(" "),a("el-table-column",{attrs:{label:"端口号",prop:"cameraPort"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:function(a){e.timeSlot(t.row)}}},[e._v("预览")])]}}])})],1)],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.cameraList.total,"current-page":e.cameraList.currentPage,"page-size":e.cameraList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.cameraCurrentPageM,"size-change":e.cameraPageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"查看时间段视频",center:"","close-on-click-modal":!1,visible:e.passagewayOpen},on:{"update:visible":function(t){e.passagewayOpen=t}}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-date-picker",{staticStyle:{width:"45%"},attrs:{size:"small",format:"yyyy/MM/dd H:mm:ss",type:"datetime"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" "),a("span",[e._v("至")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"45%"},attrs:{size:"small",format:"yyyy/MM/dd H:mm:ss",type:"datetime"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.showVideo}},[e._v("显示视频")])],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.videoFlag,expression:"videoFlag"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"15px"},attrs:{"element-loading-text":"视频拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("el-col",{attrs:{span:24}},[a("video",{attrs:{id:"video",width:"100%",height:"100%",autoplay:"autoplay"}},[a("source",{attrs:{type:"video/webm"}}),a("source")])]),e._v(" "),a("el-col",{attrs:{span:24}},e._l(e.passagewayArray,function(t,r){return a("el-button",{key:r,class:{blue:t.channlsNo==e.activeId},attrs:{size:"small"}},[e._v(e._s(t.channlsNo))])}))],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small"},on:{click:function(t){e.passagewayOpen=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var U=a("VU/8")(q,M,!1,function(e){a("fp1c")},"data-v-1779b640",null).exports,j={data:function(){return{timeData:[],Textcenter:{"text-align":"center"},timeList:{total:0,currentPage:1,pageSize:10},options:[{value:"cron",label:"定时任务"},{value:"uncron",label:"长时任务"}],timeTitle:"",timeOpen:!1,arithmeticData:[],taskData:[],taskTempData:[],timeFrom:{cronDate:"",recoveryDate:"",arithmetic:[],remark:"",task:[],cronType:""},timeRules:{cronDate:[{required:!0,message:"此项必填"}],recoveryDate:[{required:!0,message:"此项必填"}],task:[{required:!0,message:"此项必填"}],remark:[{required:!1}]},cronId:"",macroTitle:"",macroOpen:!1,macroData:[],macroId:[],transferValueLeft:[],transferValueRight:[]}},methods:{querytime:function(){var e=this;this.$api.pubApi.post("/substation/v2/cron/findPageList",{pageNo:this.timeList.currentPage,pageSize:this.timeList.pageSize},function(t){console.log(t),e.timeData=t.data.data.items,e.timeList.total=t.data.total})},addTime:function(){var e=this;this.timeFrom={cronDate:"",recoveryDate:"",remark:"",task:[]},this.$nextTick(function(){e.$refs.timeRef.clearValidate()}),this.timeTitle="新增任务",this.timeOpen=!0},editTime:function(e){console.log(e),this.cronId=e.id,this.timeFrom.cronDate=e.cronDate,this.timeFrom.recoveryDate=e.recoveryDate,this.timeFrom.remark=e.remark,this.getTaskDataById(e.id),this.timeFrom.cronType=e.cronType,this.timeTitle="编辑任务",this.timeOpen=!0},getTaskData:function(){var e=this;this.$api.pubApi.get("/substation/v2/arrangement/findAll",{},function(t){e.taskData=t.data.data.items})},getTaskDataById:function(e){var t=this;this.taskTempData=[],this.$api.pubApi.post("/substation/v2/arrangement/findByCronId",{id:e},function(e){t.taskTempData=e.data.data;var a=[];t.taskTempData.map(function(e){a.push(e.id)}),t.timeFrom.task=a})},saveTime:function(){var e=this;this.$refs.timeRef.validate(function(t){if(t)if("新增任务"==e.timeTitle){var a={onOff:"off",cronDate:e.timeFrom.cronDate,recoveryDate:e.timeFrom.recoveryDate,remark:e.timeFrom.remark,cronType:e.timeFrom.cronType,arrangementId:e.timeFrom.task.join()},r={onOff:"on",remark:e.timeFrom.remark,cronType:e.timeFrom.cronType,arrangementId:e.timeFrom.task.join()};e.$postConfirm("/substation/v2/cron/save","cron"==e.timeFrom.cronType?a:r,function(t){console.log(t),t.data.success?(e.timeOpen=!1,e.querytime(),e.$toast(t.data.flag,"success")):e.$toast(t.data.msg,"warning")})}else{var s={cronDate:e.timeFrom.cronDate,cronType:e.timeFrom.cronType,recoveryDate:e.timeFrom.recoveryDate,remark:e.timeFrom.remark,id:e.cronId,arrangementId:e.timeFrom.task.join()},i={cronType:e.timeFrom.cronType,remark:e.timeFrom.remark,id:e.cronId,arrangementId:e.timeFrom.task.join()};e.$postConfirm("/substation/v2/cron/update","cron"==e.timeFrom.cronType?s:i,function(t){console.log(t),t.data.flag?(e.timeOpen=!1,e.$toast(t.data.msg,"success"),e.querytime()):e.$toast(t.data.msg,"warning")})}})},delTime:function(e){var t=this;this.$getConfirm("/substation/v2/cron/delete",{cronId:e.id},function(e){console.log(e),e.data.flag?(t.querytime(),t.$toast(e.data.msg,"success")):t.$toast(e.data.msg,"warning")})},timeCurrentPageM:function(e){this.timeList.currentPage=e,this.querytime()},timePageSizeM:function(){this.timeList.pageSize=val,this.querytime()},taskMacro:function(e){var t=this;this.$api.pubApi.get("/substation/arrangement/find_all_page_list",{},function(e){console.log(e),t.macroData=e.data.rows}),this.macroId=[],this.$api.pubApi.get("/substation/arrangement/find_arrangment_by_Cronid",{cronId:e.id},function(e){console.log(e);for(var a=0;a<e.data.length;a++)t.macroId.push(e.data[a].arrangementId)}),this.cronId=e.id,this.macroTitle="选择宏指令",this.macroOpen=!0},startCron:function(e){var t=this;console.log(e),this.$postConfirm("/substation/v2/cron/start",{id:e.id},function(e){console.log(e.data),e.data.flag?(t.$toast(e.data.msg,"success"),t.querytime()):t.$toast(e.data.msg,"warning")})},endCron:function(e){var t=this;this.$postConfirm("/substation/v2/cron/stop",{id:e.id},function(e){console.log(e.data),e.data.flag?(t.$toast(e.data.msg,"success"),t.querytime()):t.$toast(e.data.msg,"warning")})},transferLeft:function(e,t){this.transferValueLeft=e,console.log("left ==>"+this.transferValueLeft)},transferRight:function(e,t){this.transferValueRight=e,console.log("right ==>"+this.transferValueRight)},transferChange:function(){this.transferValueLeft=[],this.transferValueRight=[]},saveMacro:function(){var e=this;console.log(this.macroId),console.log(this.transferValueLeft,this.transferValueRight),this.transferValueLeft.length?this.$toast("请把左侧选中宏指令切换到右侧","warning"):this.transferValueRight.length?this.$toast("请把右侧选中宏指令切换到左侧","warning"):this.$postConfirm("/substation/cron/add_arrangent_cron",{cronId:this.cronId,ids:this.macroId.join()},function(t){console.log(t),t.data.success?(e.transferValue="",e.macroOpen=!1,e.$toast(t.data.msg,"success")):e.$toast(t.data.msg,"warning")})},typeFormat:function(e,t){var a=e.cronType.trim();return void 0==a?"":"cron"==a?"定时任务":"长时任务"}},computed:{},components:{},created:function(){},mounted:function(){this.querytime(),this.getTaskData()}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addTime}},[e._v("新建")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer"},[a("el-table",{attrs:{data:e.timeData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"任务类型",prop:"cronType",formatter:e.typeFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"启动时间",prop:"cronDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"复位时间",prop:"recoveryDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.editTime(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(a){e.delTime(t.row)}}},[e._v("删除")]),e._v(" "),"off"==t.row.onOff?a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:function(a){e.startCron(t.row)}}},[e._v("启动")]):e._e(),e._v(" "),"on"==t.row.onOff?a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(a){e.endCron(t.row)}}},[e._v("关闭")]):e._e()]}}])})],1)],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.timeList.total,"current-page":e.timeList.currentPage,"page-size":e.timeList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.timeCurrentPageM,"size-change":e.timePageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{center:"","close-on-click-modal":!1,title:e.timeTitle,visible:e.timeOpen},on:{"update:visible":function(t){e.timeOpen=t}}},[a("el-form",{ref:"timeRef",attrs:{"label-width":"120px",model:e.timeFrom,size:"small",rules:e.timeRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务类型",prop:"cronType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.timeFrom.cronType,callback:function(t){e.$set(e.timeFrom,"cronType",t)},expression:"timeFrom.cronType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),"cron"==e.timeFrom.cronType?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"启动时间",prop:"cronDate"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:"请选择启动时间"},model:{value:e.timeFrom.cronDate,callback:function(t){e.$set(e.timeFrom,"cronDate",t)},expression:"timeFrom.cronDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复位时间",prop:"recoveryDate"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:"请选择复位时间"},model:{value:e.timeFrom.recoveryDate,callback:function(t){e.$set(e.timeFrom,"recoveryDate",t)},expression:"timeFrom.recoveryDate"}})],1)],1)],1):e._e(),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务",prop:"task"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",size:"small",placeholder:"请选择你得任务"},model:{value:e.timeFrom.task,callback:function(t){e.$set(e.timeFrom,"task",t)},expression:"timeFrom.task"}},e._l(e.taskData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.timeFrom.remark,callback:function(t){e.$set(e.timeFrom,"remark",t)},expression:"timeFrom.remark"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.saveTime}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.timeOpen=!1}}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{width:"60%",center:"","close-on-click-modal":!1,title:e.macroTitle,visible:e.macroOpen},on:{"update:visible":function(t){e.macroOpen=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-transfer",{staticStyle:{display:"inline-block","text-align":"left"},attrs:{titles:["未选宏指令","已选宏指令"],filterable:"",data:e.macroData,props:{key:"arrangementId",label:"arrangementName"}},on:{"left-check-change":e.transferLeft,"right-check-change":e.transferRight,change:e.transferChange},model:{value:e.macroId,callback:function(t){e.macroId=t},expression:"macroId"}})],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.saveMacro}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.macroOpen=!1}}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var B=a("VU/8")(j,A,!1,function(e){a("I59K")},null,null).exports,E={data:function(){return{searchFrom:{arithmeticName:""},arithmeticData:[],arithmeticTypeData:[],collectionData:[],Textcenter:{"text-align":"center"},arithmeticList:{total:0,currentPage:1,pageSize:10},arithmeticId:"",arithmeticTitle:"",arithmeticOpen:!1,arithmeticFrom:{arithmeticName:"",arithmeticType:"",selfPath:"",enterPath:"",outPath:"",remarks:"",collection:""},arithmeticRules:{arithmeticName:[{required:!0,message:"此项必填"}],arithmeticType:[{required:!0,message:"此项必填"}],selfPath:[{required:!1}],enterPath:[{required:!0,message:"此项必填"}],outPath:[{required:!1}],collection:[{required:!0,message:"此项必填"}],remarks:[{required:!1}]}}},methods:{queryArithmetic:function(){var e=this;this.$api.pubApi.get("/substation/v2/arithmetic/pageList",{arithmeticName:this.searchFrom.arithmeticName,pageNo:this.arithmeticList.currentPage,pageSize:this.arithmeticList.pageSize},function(t){console.log(t),e.arithmeticData=t.data.data.items,e.arithmeticList.total=t.data.data.totalNum})},getArithmeticType:function(){var e=this;this.$api.pubApi.get("/substation/v2/dictionaries/findValueByType",{dictType:"arithmetic_type"},function(t){console.log(t),e.arithmeticTypeData=t.data.data})},getCollection:function(){var e=this;this.$api.pubApi.get("/substation/v2/dictionaries/findValueByType",{dictType:"arithmetic_mode"},function(t){console.log(t),e.collectionData=t.data.data})},addArithmetic:function(){var e=this;this.arithmeticId="",this.arithmeticFrom={arithmeticName:"",arithmeticType:"",selfPath:"",enterPath:"",outPath:"",remark:"",collection:""},this.$nextTick(function(){e.$refs.arithmeticRef.clearValidate()}),this.arithmeticTitle="新增算法配置",this.arithmeticOpen=!0},editArithmetic:function(e){this.arithmeticId=e.id,this.arithmeticFrom.arithmeticType=e.arithmeticType,this.arithmeticFrom.collection=e.gatherMode,this.arithmeticFrom.arithmeticName=e.arithmeticName,this.arithmeticFrom.selfPath=e.selfPath,this.arithmeticFrom.enterPath=e.enterPath,this.arithmeticFrom.outPath=e.outPath,this.arithmeticFrom.remarks=e.remarks,this.arithmeticTitle="编辑算法配置",this.arithmeticOpen=!0},saveArithmetic:function(){var e=this;this.$refs.arithmeticRef.validate(function(t){if(t){var a="";a=e.arithmeticId?"/substation/v2/arithmetic/update":"/substation/v2/arithmetic/save",e.$postConfirm(a,{arithmeticName:e.arithmeticFrom.arithmeticName,arithmeticType:e.arithmeticFrom.arithmeticType,selfPath:e.arithmeticFrom.selfPath,enterPath:e.arithmeticFrom.enterPath,outPath:e.arithmeticFrom.outPath,remark:e.arithmeticFrom.remarks,gatherMode:e.arithmeticFrom.collection,id:e.arithmeticId},function(t){console.log(t),e.arithmeticOpen=!1,e.queryArithmetic(),t.data.flag?e.$toast(t.data.msg,"success"):e.$toast(t.data.msg,"warning")})}})},delArithmetic:function(e){var t=this;this.$postConfirm("/substation/v2/arithmetic/delete",{id:e.id},function(e){t.queryArithmetic(),t.$toast(e.data.msg,"success")})},arithmeticCurrentPageM:function(e){this.arithmeticList.currentPage=e,this.queryArithmetic()},arithmeticPageSizeM:function(e){this.arithmeticList.pageSize=e,this.queryArithmetic()}},computed:{},components:{},created:function(){},mounted:function(){this.queryArithmetic(),this.getArithmeticType(),this.getCollection()}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"算法名称"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入算法名称",clearable:""},model:{value:e.searchFrom.arithmeticName,callback:function(t){e.$set(e.searchFrom,"arithmeticName",t)},expression:"searchFrom.arithmeticName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btnGray",attrs:{size:"small",icon:"el-icon-search"},on:{click:e.queryArithmetic}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addArithmetic}},[e._v("新建")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer hidden-xs-only"},[a("el-table",{attrs:{data:e.arithmeticData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"算法名称",prop:"arithmeticName"}}),e._v(" "),a("el-table-column",{attrs:{label:"采集方式",prop:"gatherModeName"}}),e._v(" "),a("el-table-column",{attrs:{label:"自身路径",prop:"selfPath"}}),e._v(" "),a("el-table-column",{attrs:{label:"输入路径",prop:"enterPath"}}),e._v(" "),a("el-table-column",{attrs:{label:"输出路径",prop:"outPath"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.editArithmetic(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(a){e.delArithmetic(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-main",{staticClass:"mainTableContainer hidden-sm-and-up"},[a("el-table",{attrs:{data:e.arithmeticData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"算法名称",prop:"arithmeticName"}}),e._v(" "),a("el-table-column",{attrs:{label:"采集方式",prop:"gatherModeName"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.editArithmetic(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small"},on:{click:function(a){e.delArithmetic(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.arithmeticList.total,"current-page":e.arithmeticList.currentPage,"page-size":e.arithmeticList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.arithmeticCurrentPageM,"size-change":e.arithmeticPageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{center:"","close-on-click-modal":!1,title:e.arithmeticTitle,visible:e.arithmeticOpen},on:{"update:visible":function(t){e.arithmeticOpen=t}}},[a("el-form",{ref:"arithmeticRef",attrs:{"label-width":"100px",model:e.arithmeticFrom,size:"small",rules:e.arithmeticRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"算法名称",prop:"arithmeticName"}},[a("el-input",{attrs:{placeholder:"请输入算法名称"},model:{value:e.arithmeticFrom.arithmeticName,callback:function(t){e.$set(e.arithmeticFrom,"arithmeticName",t)},expression:"arithmeticFrom.arithmeticName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"算法类型",prop:"arithmeticType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择算法类型"},model:{value:e.arithmeticFrom.arithmeticType,callback:function(t){e.$set(e.arithmeticFrom,"arithmeticType",t)},expression:"arithmeticFrom.arithmeticType"}},e._l(e.arithmeticTypeData,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictValue,value:e.dictKey}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"采集方式",prop:"collection"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择采集方式"},model:{value:e.arithmeticFrom.collection,callback:function(t){e.$set(e.arithmeticFrom,"collection",t)},expression:"arithmeticFrom.collection"}},e._l(e.collectionData,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictValue,value:e.dictKey}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"输入路径",prop:"enterPath"}},[a("el-input",{attrs:{placeholder:"请输入输入路径"},model:{value:e.arithmeticFrom.enterPath,callback:function(t){e.$set(e.arithmeticFrom,"enterPath",t)},expression:"arithmeticFrom.enterPath"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"输出路径",prop:"outPath"}},[a("el-input",{attrs:{placeholder:"请输入输出路径"},model:{value:e.arithmeticFrom.outPath,callback:function(t){e.$set(e.arithmeticFrom,"outPath",t)},expression:"arithmeticFrom.outPath"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"本身路径",prop:"selfPath"}},[a("el-input",{attrs:{placeholder:"请输入路径"},model:{value:e.arithmeticFrom.selfPath,callback:function(t){e.$set(e.arithmeticFrom,"selfPath",t)},expression:"arithmeticFrom.selfPath"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.arithmeticFrom.remarks,callback:function(t){e.$set(e.arithmeticFrom,"remarks",t)},expression:"arithmeticFrom.remarks"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.saveArithmetic}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.arithmeticOpen=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var H=a("VU/8")(E,V,!1,function(e){a("spGG")},"data-v-6879b84f",null).exports,G={data:function(){return{searchFrom:{log:""},peoDataNum:[],peoDataSum:0,carDataNum:[],carDataSum:0,logData:[],Textcenter:{"text-align":"center"},logList:{total:0,currentPage:1,pageSize:10},timeData:[],currentDate:new Date,previewOpen:!1}},methods:{queryLog:function(){var e=this;this.$api.pubApi.get("/substation/v2/arrangement/find_all_page_list",{pageNo:this.cameralayoutList.currentPage,pageSize:this.cameralayoutList.pageSize,arrangementName:this.searchFrom.cameraNumber},function(t){console.log(t),e.layoutData=t.data.rows,e.cameralayoutList.total=t.data.total})},dellog:function(){},preview:function(e){this.previewOpen=!0,console.log(e.imageUrl),setTimeout(function(){document.getElementById("img_Id").src=e.imageUrl},1e3)},drawLine:function(){this.$echarts.init(document.getElementById("myChart")).setOption({title:{text:"人与车流量监测",subtext:"数据来源优势智通技术有限公司",x:"center"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},legend:{data:["人流量","车雨量"],x:"left"},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},axisPointer:{link:{xAxisIndex:"all"}},dataZoom:[{show:!0,realtime:!0,start:1,end:100,xAxisIndex:[0,1]},{type:"inside",realtime:!0,start:1,end:100,xAxisIndex:[0,1]}],grid:[{left:50,right:50,height:"35%"},{left:50,right:50,top:"55%",height:"35%"}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:this.timeData},{gridIndex:1,type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:this.timeData,position:"top"}],yAxis:[{name:"人数",type:"value",max:10},{gridIndex:1,name:"车数",type:"value",inverse:!0,nameTextStyle:{color:"red",fontSize:14,padding:-5}}],series:[{name:"人",type:"line",symbolSize:8,hoverAnimation:!1,data:this.peoDataNum},{name:"车",type:"line",xAxisIndex:1,yAxisIndex:1,symbolSize:8,hoverAnimation:!1,data:this.carDataNum}]})},drawpie:function(){this.$echarts.init(document.getElementById("myChartpie")).setOption({title:{text:"人与车占比",subtext:"数据来源优势智通技术有限公司",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:["人","车"]},series:[{name:"今日数据",type:"pie",radius:["40%","55%"],label:{normal:{formatter:"{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ",backgroundColor:"#eee",borderColor:"#aaa",borderWidth:1,borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},b:{fontSize:16,lineHeight:33},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2}}}},data:[{value:this.peoDataSum,name:"人"},{value:this.carDataSum,name:"车"}]}]})},queryToDayData:function(){var e=this;this.$api.pubApi.post("/substation/v2/getData",{},function(t){e.timeData=t.data.data.timeList,e.peoDataNum=t.data.data.peopleNumberList,e.carDataNum=t.data.data.carNumberList,e.peoDataSum=t.data.data.peopleNumberAll,e.carDataSum=t.data.data.carNumberAll}).then(function(){e.drawLine(),e.drawpie()}),this.$api.pubApi.post("/substation/v2/getList",{},function(t){console.log(t.data),e.logData=t.data})},layoutLCurrentPageM:function(e){},layoutPageSizeM:function(){}},computed:{imgSrc:function(){return this.$store.state.alarm.imgSrc}},components:{},created:function(){},mounted:function(){this.$nextTick(function(){setInterval(this.queryToDayData,5e3)})}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-main",{staticClass:"mainTableContainer"},[a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{style:{width:"46%"}},[a("div",{style:{width:"800px",height:"600px"},attrs:{id:"myChart"}}),e._v(" "),a("div",{style:{width:"800px",height:"200px"},attrs:{id:"myChartpie"}})]),e._v(" "),a("el-main",e._l(e.logData,function(t,r){return a("el-row",{key:t.id,attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(a){e.preview(t)}}},[a("img",{staticClass:"image",attrs:{src:t.imageUrl}})])],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-card",{style:"personCar"==t.type?{background:"#909399"}:{background:"#F56C6C"},attrs:{"body-style":{padding:"0px"}}},[a("div",{staticStyle:{padding:"14px"}},[a("span",[e._v("编号"+e._s(t.cameraNum))]),e._v(" "),a("div",{staticClass:"bottom clearfix"},["personCar"==t.type?a("p",[e._v("人数："+e._s(t.peopleNumber)+"   车数："+e._s(t.carNumber))]):a("p",[e._v("火光监测数据")]),e._v(" "),a("time",{staticClass:"time",style:{float:"left",color:"#EBEEF5"}},[e._v(e._s(t.recognizeTime))]),e._v(" "),a("el-button",{staticClass:"button",style:{float:"right",color:"#fff"},attrs:{type:"text"},on:{click:function(a){e.preview(t)}}},[e._v("查看")])],1)])])],1)],1)}))],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{width:"35%",title:"查看",center:"","close-on-click-modal":!1,visible:e.previewOpen},on:{"update:visible":function(t){e.previewOpen=t}}},[a("el-row",[a("el-card",[a("div",{staticStyle:{width:"500px",height:"400px"}},[a("img",{staticClass:"image",staticStyle:{width:"500px",height:"400px"},attrs:{src:"",id:"img_Id"}})])])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.previewOpen=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var X=a("VU/8")(G,Y,!1,function(e){a("TMSi")},"data-v-b4bf7bea",null).exports,K=a("mvHQ"),J=a.n(K),W={inject:["reload"],data:function(){return{searchFrom:{taskName:""},layoutData:"",taskData:[],Textcenter:{"text-align":"center"},taskList:{total:0,currentPage:1,pageSize:10},taskTitle:"",taskOpen:!1,taskFrom:{name:"",frameRate:""},taskRules:{name:[{required:!0,message:"此项必填"}],frameRate:[{required:!0,message:"此项必填"}]},count:1,camerRow:{},mapArr:{}}},methods:{goPictureMap:function(e){console.log(this.mapArr,"aaa当前校验摄像头信息"),this.$router.push({name:"mapLocation",params:{item:this.camerRow,mapArr:e}})},subBtn:function(){var e=this,t=JSON.parse(sessionStorage.getItem("leftArr")),a=JSON.parse(sessionStorage.getItem("rightArr")),r=JSON.parse(sessionStorage.getItem("key"));if(a.length==t.length)if(0!=a.length&&0!=t.length){var s="";s=this.camerRow.cameraId?this.camerRow.cameraId:"",this.$postConfirm("/substation/calibration/calibration",{cameraNum:s,imageUrl:this.layoutData,calibration:J()(r)},function(t){e.mapArr=t.data.data.data,e.goPictureMap(e.mapArr)})}else this.$toast("请先选择","error");else this.$toast("两边图中的数量需要相等","error")},coordinate:function(e){this.$coordinate(e),console.log(e,"图标")},jumpNewPage:function(){var e=row.arrangementId;this.$router.push({path:"/view/cameraLayoutDetail/"+e})},clearPunctuation:function(){sessionStorage.clear(),this.$toast("已经清除所有坐标","success"),this.reload()}},computed:{},components:{},created:function(){this.$route.params.item&&(this.camerRow=this.$route.params.item)},mounted:function(){var e=this;this.$api.pubApi.post("/substation/calibration/oneShot",{ip:this.camerRow.cameraIp,user:this.camerRow.username,password:this.camerRow.password,port:this.camerRow.cameraPort,channel:this.camerRow.channlsNo,imagesPath:""},function(t){console.log(t.data),e.layoutData=t.data.data,document.getElementById("imgId").src=t.data.data,document.getElementById("imgTwoId").src=t.data.data});var t=sessionStorage.getItem("key");if(t=JSON.parse(t))for(var a=0;a<t.length;a++){var r=t[a].text;D()(t[a].imgId).after(r),D()(t[a].imgId).next().html('<i class="el-icon-location-outline"></i>'),D()(t[a].imgId).next().css({color:"red",position:"absolute",left:t[a].leftPx,top:t[a].topPx})}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-minus"},on:{click:e.clearPunctuation}},[e._v("清除")]),e._v(" "),a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:e.subBtn}},[e._v("提交")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer"},[a("div",{staticClass:"pRelative fl"},[a("img",{staticStyle:{margin:"0",padding:"0",width:"400px",height:"200px"},attrs:{id:"imgId",src:""},on:{click:e.coordinate}})]),e._v(" "),a("div",{staticClass:"pRelative fr"},[a("img",{staticStyle:{margin:"0",padding:"0",width:"400px",height:"200px"},attrs:{id:"imgTwoId",src:""},on:{click:e.coordinate}})])])],1)},staticRenderFns:[]};var Q=a("VU/8")(W,Z,!1,function(e){a("bZri")},"data-v-78ff431a",null).exports,ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{height:"100%"}},[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入角色名称",clearable:""},model:{value:e.selectList.roleName,callback:function(t){e.$set(e.selectList,"roleName",t)},expression:"selectList.roleName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-search"},on:{click:e.queryRole}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl headTitle"},[a("p",{staticClass:"fl"},[e._v("角色管理")]),a("span",{},[e._v("list")])]),e._v(" "),a("div",{staticClass:"fr"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-add"},on:{click:e.addRole}},[e._v("新建")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer"},[a("el-table",{attrs:{border:"",data:e.companyData}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色名称",prop:"name1"}}),e._v(" "),a("el-table-column",{attrs:{label:"英文名称",prop:"name2"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属部门",prop:"name3"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属机构",prop:"name4"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"name5"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-icon-more controlIcon"}),e._v(" "),a("el-dropdown-menu",{staticClass:"controlBar",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){e.seeRole(t.row)}}},[a("a",{attrs:{href:"#"}},[e._v("查看")])]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.editRole(t.row)}}},[a("a",{attrs:{href:"#"}},[e._v("修改")])]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.delRole(t.row)}}},[a("a",{attrs:{href:"#"}},[e._v("删除")])]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.perSettings(t.row)}}},[a("a",{attrs:{href:"#"}},[e._v("权限设置")])]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.assUsers(t.row)}}},[a("a",{attrs:{href:"#"}},[e._v("分配用户")])])],1)],1)]}}])})],1),e._v(" "),a("el-footer",{staticClass:"footerContainer"},[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.roleList.total,"current-page":e.roleList.currentPage,"page-size":e.roleList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.roleCurrentPageM,"size-change":e.rolePageSizeM}})],1)]),e._v(" "),a("el-header",{staticClass:"btnContainer",staticStyle:{background:"#eef0f5",position:"relative"}},[a("div",{staticClass:"fl headTitle"},[a("p",{staticClass:"fl"},[e._v("用户列表所属角色")]),a("span",{},[e._v("list")])]),e._v(" "),a("div",{staticStyle:{position:"absolute",right:"0"}},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-add"},on:{click:e.assUsers}},[e._v("添加用户")])],1)]),e._v(" "),a("el-table",{attrs:{border:"",data:e.companyData}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"登录名",prop:"name1"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name2"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属公司",prop:"name3"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属部门",prop:"name4"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"name5"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机",prop:"name5"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"mini"}},[e._v("移除")])]}}])})],1)],1),e._v(" "),a("el-footer",{staticClass:"footerContainer"},[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.roleList.total,"current-page":e.roleList.currentPage,"page-size":e.roleList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.roleCurrentPageM,"size-change":e.rolePageSizeM}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.roleTitle,center:"",visible:e.roleOpen,"close-on-click-modal":!1},on:{"update:visible":function(t){e.roleOpen=t}}},[a("el-form",{ref:"clearFrom",attrs:{"label-width":"80px",rules:e.roleRules,model:e.roleFrom}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"归属机构",prop:"ownerOrgan"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:""},model:{value:e.roleFrom.ownerOrgan,callback:function(t){e.$set(e.roleFrom,"ownerOrgan",t)},expression:"roleFrom.ownerOrgan"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色名称","label-width":"100px",prop:"roleName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.roleFrom.roleName,callback:function(t){e.$set(e.roleFrom,"roleName",t)},expression:"roleFrom.roleName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"英文名称",prop:"englishName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.roleFrom.englishName,callback:function(t){e.$set(e.roleFrom,"englishName",t)},expression:"roleFrom.englishName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色类型",prop:"roleType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:""},model:{value:e.roleFrom.roleType,callback:function(t){e.$set(e.roleFrom,"roleType",t)},expression:"roleFrom.roleType"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否系统数据",prop:"sysData"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:""},model:{value:e.roleFrom.sysData,callback:function(t){e.$set(e.roleFrom,"sysData",t)},expression:"roleFrom.sysData"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否可用",prop:"isUse"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:""},model:{value:e.roleFrom.isUse,callback:function(t){e.$set(e.roleFrom,"isUse",t)},expression:"roleFrom.isUse"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{size:"small"},model:{value:e.roleFrom.remarks,callback:function(t){e.$set(e.roleFrom,"remarks",t)},expression:"roleFrom.remarks"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnDarkGreen",attrs:{size:"small"},on:{click:e.roleConfirm}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.roleOpen=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"菜单权限",visible:e.perSettingsOpen,center:""},on:{"update:visible":function(t){e.perSettingsOpen=t}}},[a("el-tree",{ref:"treeRef",attrs:{data:e.tableData,"node-key":"id","show-checkbox":"","render-after-expand":!1}}),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnDarkGreen",attrs:{size:"small"},on:{click:e.resetChecked}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"btnDarkGreen",attrs:{size:"small"},on:{click:e.perConfirm}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.perSettingsOpen=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择用户",center:"",visible:e.assUsersOpen},on:{"update:visible":function(t){e.assUsersOpen=t}}},[a("el-container",[a("el-aside",{attrs:{width:"130px"}},[a("el-tree",{attrs:{data:e.treeData,"default-expand-all":"",props:e.defaultProps}})],1),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("div",{staticClass:"mainContent"},[a("div",[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入登录名",size:"small"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入姓名",size:"small"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-search"}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"btnYellow",attrs:{size:"small",icon:"el-icon-error"}},[e._v("重置")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"mainContentBottom"},[a("el-table",{attrs:{data:e.companyData,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"登录名",prop:"name1"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name2"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"name3"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机",prop:"name4"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属公司",prop:"name5"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属部门",prop:"name1"}})],1),e._v(" "),a("el-footer",{staticClass:"footerContainer"},[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.perList.total,"current-page":e.perList.currentPage,"page-size":e.perList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.perCurrentPageM,"size-change":e.perPageSizeM}})],1)])],1)])])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnDarkGreen",attrs:{size:"small"}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.assUsersOpen=!1}}},[e._v("关闭")])],1)],1)],1)],1)},staticRenderFns:[]};var te=a("VU/8")({data:function(){return{selectList:{roleName:""},roleTitle:"",roleOpen:!1,perSettingsOpen:!1,assUsersOpen:!1,defaultProps:{label:"name",children:"officeList"},tableData:[{id:0,label:"事件1",event:"我爱你"},{id:1,label:"事件1",event:"我爱你",children:[{id:2,label:"事件2",event:"我爱你"},{id:3,label:"事件3",event:"我爱你",children:[{id:4,label:"事件4",event:"我爱你"},{id:5,label:"事件5",event:"我爱你"},{id:6,label:"事件6",event:"我爱你"}]}]}],roleFrom:{ownerOrgan:"",roleName:"",englishName:"",roleType:"",sysData:"",isUse:"",remarks:""},roleRules:{ownerOrgan:[{required:!1,message:"请选择归属机构"}],roleName:[{required:!0,trigger:"blur",message:"请输入角色名称"}],englishName:[{required:!0,trigger:"blur",message:"请输入英文名称"}],roleType:[{required:!0,trigger:"blur",message:"请选择角色类型"}],sysData:[{required:!1}],isUse:[{required:!1}],remarks:[{required:!1}]},roleList:{total:0,currentPage:10,pageSize:1},perList:{total:0,currentPage:10,pageSize:1},companyData:[{name1:"jj3",name2:"jj3",name3:"jj3",name4:"jj3",name5:"j3j"}],treeData:[]}},methods:{queryRole:function(){},seeRole:function(){this.roleOpen=!0},addRole:function(){this.roleTitle="新建角色",this.roleOpen=!0},editRole:function(){this.roleTitle="编辑角色",this.roleOpen=!0},roleConfirm:function(){},delRole:function(){},perSettings:function(){this.perSettingsOpen=!0,this.selectChecked()},assUsers:function(){this.getTreeData(),this.assUsersOpen=!0},getTreeData:function(){},roleCurrentPageM:function(){},rolePageSizeM:function(){},perCurrentPageM:function(){},perPageSizeM:function(){},perConfirm:function(){var e=this.$refs.treeRef.getHalfCheckedKeys(),t=this.$refs.treeRef.getCheckedKeys();e.concat(t)},resetChecked:function(){this.$refs.treeRef.setCheckedKeys([])},selectChecked:function(){var e=this;this.$nextTick(function(){e.$refs.treeRef.setCheckedKeys([0])})}},computed:{},components:{},created:function(){},mounted:function(){}},ee,!1,function(e){a("juDD")},"data-v-875c52bc",null).exports,ae={filters:{statusFilter:function(e){return{1:"#37d777",2:"#abb1b7"}[e]}},data:function(){var e=this;return{searchUser:{name:"",no:"",status:"",companyId:"",officeId:""},optionStatus:[],editDisabled:!0,delDisabled:!0,userManageOpen:!1,userManageTitle:"",userRole:["人事人员","后台开发","工程师","管理员","部门管理员"],ownerCompanyOpen:!1,partProjectOpen:!1,companyOrBranch:"",companyChildren:"",departmentOpen:!1,selectBranch:!0,dropdownShow:!1,passwordHidden:!0,defaultProps:{label:"name",children:"officeList"},defaultCompany:{label:"name",children:"offices"},userFrom:{companyName:"",status:"",conpanyId:"",officeId:"",officeName:"",no:"",name:"",phone:"",telePhone:"",loginFlag:"",userSex:"",duties:"",email:"",remarks:"",passwordConfirm:""},userRules:{companyName:[{required:!0,message:"此项必填"}],status:[{required:!0,message:"此项必填"}],officeName:[{required:!0,message:"此项必填"}],no:[{required:!0,message:"此项必填"}],name:[{required:!0,message:"此项必填"}],loginName:[{required:!0,message:"此项必填"}],password:[{required:!0,message:"此项必填"}],passwordConfirm:[{required:!0,message:"此项必填"},{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.userFrom.password?r(new Error("两次输入密码不一致!")):r()}}],phone:[{required:!0,message:"此项必填"}],telePhone:[{required:!1}],loginFlag:[{required:!0,trigger:"change",message:"此项必填"}],userSex:[{required:!0,message:"此项必填"}],duties:[{required:!0,message:"此项必填"}],email:[{required:!1}],remarks:[{required:!1}]},companyList:{total:0,currentPage:1,pageSize:10},treeData:[],userData:[],partProjectTable:[],companyData:[],departData:[],rules:{},companyId:"",OneRowUser:"",oneRowId:"",userList:{currentPage:1,pageSize:10,total:0},partProjectList:{currentPage:1,pageSize:10,total:0}}},methods:{dropdownSwitch:function(){this.dropdownShow=!this.dropdownShow},getTreeData:function(){},getStatus:function(){},partProject:function(e){this.getPartProject(e),this.partProjectOpen=!0},getPartProject:function(e){},ownerCompany:function(e){},ownerBranch:function(e){},getUserData:function(e){this.searchUser.companyId="",this.searchUser.officeId="",console.log(e),null!=e.ext4?this.searchUser.companyId=e.id:this.searchUser.officeId=e.id,this.queryUser()},resetUser:function(){this.searchUser={no:"",name:"",status:""},this.queryUser()},queryUser:function(){},addUserManage:function(){var e=this;this.dropdownShow=!1,this.userFrom={companyName:"",status:"",conpanyId:"",officeId:"",officeName:"",loginName:"",no:"",name:"",phone:"",telePhone:"",loginFlag:"",userSex:"",duties:"",email:"",remarks:"",passwordConfirm:""},this.$nextTick(function(){e.$refs.userRef.clearValidate()}),this.passwordHidden=!0,this.userManageTitle="新建用户",this.userManageOpen=!0,console.log(this.$refs)},editUserManage:function(){this.dropdownShow=!1,this.passwordHidden=!1;var e=this.OneRowUser[0];this.userFrom.companyName=e.company.id,this.ownerBranch(this.userFrom.companyName),this.userFrom.officeName=e.office.id,this.userFrom.no=e.no,this.userFrom.name=e.name,this.userFrom.loginName=e.loginName,this.userFrom.password=e.password,this.userFrom.passwordConfirm=e.password,this.userFrom.phone=e.phone,this.userFrom.telePhone=e.mobile,this.userFrom.loginFlag=String(e.loginFlag),this.userFrom.userSex=e.userSex,this.userFrom.duties=e.duties,this.userFrom.email=e.email,this.userFrom.remarks=e.remarks,this.userManageTitle=" 修改用户",this.userManageOpen=!0},delUserManage:function(e){this.dropdownShow=!1},selectUser:function(e){e.length>0?(this.delDisabled=!1,1==e.length?this.editDisabled=!1:this.editDisabled=!0):(this.delDisabled=!0,this.editDisabled=!0),console.log(e),this.OneRowUser=e;for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);this.oneRowId=t.join()},userConfirm:function(){var e=this;this.$refs.userRef.validate(function(t){t&&(console.log(e.userFrom.loginFlag),"新建用户"==e.userManageTitle?e.$postConfirm("/projectmanage/user/insert",{"company.id":e.userFrom.companyName,"office.id":e.userFrom.officeName,loginName:e.userFrom.loginName,password:f()(e.userFrom.password),no:e.userFrom.no,name:e.userFrom.name,phone:e.userFrom.phone,mobile:e.userFrom.telePhone,loginFlag:e.userFrom.loginFlag,userSex:e.userFrom.userSex,duties:e.userFrom.duties,email:e.userFrom.email,remarks:e.userFrom.remarks},function(t){console.log(t),t.data.success?(e.userManageOpen=!1,e.$toast(t.data.msg,"success"),e.queryUser()):e.$toast(t.data.msg,"warning")}):(console.log(e.userFrom.loginFlag),e.$postConfirm("/projectmanage/user/update",{id:e.oneRowId,"company.id":e.userFrom.companyName,"office.id":e.userFrom.officeName,loginName:e.userFrom.loginName,password:e.userFrom.password,no:e.userFrom.no,name:e.userFrom.name,phone:e.userFrom.phone,mobile:e.userFrom.telePhone,loginFlag:e.userFrom.loginFlag,userSex:e.userFrom.userSex,duties:e.userFrom.duties,email:e.userFrom.email,remarks:e.userFrom.remarks},function(t){t.data.success?(console.log(e.userFrom.loginFlag),e.userManageOpen=!1,e.$toast(t.data.msg,"success"),e.queryUser()):e.$toast(t.data.msg,"warning")})))})},userPageSizeM:function(e){this.userList.pageSize=e,this.queryUser()},userCurrentPageM:function(e){this.userList.currentPage=e,this.queryUser()},companyPageSizeM:function(){},companyCurrentPageM:function(){},partProjectPageSizeM:function(){},partProjectCurrentPageM:function(){}},computed:{},components:{},created:function(){},mounted:function(){this.getTreeData(),this.queryUser(),this.getStatus(),this.ownerCompany()}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticClass:"leftTree"},[a("el-tree",{attrs:{data:e.treeData,"default-expand-all":"",props:e.defaultProps},on:{"node-click":e.getUserData}})],1),e._v(" "),a("el-container",[a("div",{staticClass:"searchConainer"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.searchUser.name,callback:function(t){e.$set(e.searchUser,"name",t)},expression:"searchUser.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工号"}},[a("el-input",{attrs:{placeholder:"请输入工号"},model:{value:e.searchUser.no,callback:function(t){e.$set(e.searchUser,"no",t)},expression:"searchUser.no"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态",size:"small",filterable:""},model:{value:e.searchUser.status,callback:function(t){e.$set(e.searchUser,"status",t)},expression:"searchUser.status"}},e._l(e.optionStatus,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictValue,value:e.dictKey}})}))],1),e._v(" "),a("el-form-item",{staticClass:"dfr"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-search"},on:{click:e.queryUser}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"btnYellow",attrs:{size:"small",icon:"el-icon-error"},on:{click:e.resetUser}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-header",{staticClass:"btnContainer"},[a("div",{staticClass:"fl headTitle"},[a("p",{staticClass:"fl"},[e._v("用户管理")]),a("span",{},[e._v("list")]),e._v(" "),a("i",{staticClass:"fr iconfont icon-diandiandianshu hidden-sm-and-up",on:{click:e.dropdownSwitch}}),e._v(" "),a("el-dropdown-menu",{directives:[{name:"show",rawName:"v-show",value:e.dropdownShow,expression:"dropdownShow"}],attrs:{id:"dropdownPopUp"}},[a("div",{on:{click:e.addUserManage}},[a("span",[a("i",{staticClass:"el-icon-plus"}),e._v("新建\n            ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editDisabled,expression:"!editDisabled"}],on:{click:e.editUserManage}},[a("span",[a("i",{staticClass:"el-icon-edit"}),e._v("修改\n            ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.delDisabled,expression:"!delDisabled"}],on:{click:function(t){e.delUserManage(2)}}},[a("span",[a("i",{staticClass:"el-icon-delete"}),e._v("删除\n            ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.delDisabled,expression:"!delDisabled"}],on:{click:function(t){e.delUserManage(1)}}},[a("span",[a("i",{staticClass:"el-icon-delete"}),e._v("启用\n            ")])])])],1),e._v(" "),a("div",{staticClass:"fr hidden-xs-only"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addUserManage}},[e._v("新建")]),e._v(" "),a("el-button",{staticClass:"btnYellow",attrs:{size:"small",icon:"el-icon-edit",disabled:e.editDisabled},on:{click:e.editUserManage}},[e._v("修改")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small",icon:"el-icon-delete",disabled:e.delDisabled},on:{click:function(t){e.delUserManage(2)}}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"btnRed",attrs:{size:"small",icon:"el-icon-delete",disabled:e.delDisabled},on:{click:function(t){e.delUserManage(1)}}},[e._v("启用")])],1)]),e._v(" "),a("el-main",{staticClass:"mainTableContainer hidden-xs-only"},[a("el-table",{attrs:{data:e.userData,border:""},on:{"selection-change":e.selectUser}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"工号",prop:"no"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"userSexName"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属部门",prop:"office.name"}}),e._v(" "),a("el-table-column",{attrs:{label:"ְ职务",prop:"duties"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"",color:e._f("statusFilter")(t.row.userStatus)}},[e._v(e._s(t.row.userStatusName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"mini"},on:{click:function(a){e.partProject(t.row)}}},[e._v("参与项目")])]}}])})],1)],1),e._v(" "),a("el-main",{staticClass:"mainTableContainer hidden-sm-and-up"},[a("el-table",{attrs:{data:e.userData,border:""},on:{"selection-change":e.selectUser}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"工号",prop:"no"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"mini"},on:{click:function(a){e.partProject(t.row)}}},[e._v("参与项目")])]}}])})],1)],1),e._v(" "),a("el-footer",{staticClass:"footerContainer"},[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.userList.total,"current-page":e.userList.currentPage,"page-size":e.userList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.userCurrentPageM,"size-change":e.userPageSizeM}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.userManageTitle,width:"60%",visible:e.userManageOpen,center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.userManageOpen=t}}},[a("el-form",{ref:"userRef",attrs:{"label-width":"80px",model:e.userFrom,rules:e.userRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"归属公司",prop:"companyName"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择归属公司",filterable:"",clearable:""},on:{change:e.ownerCompany},model:{value:e.userFrom.companyName,callback:function(t){e.$set(e.userFrom,"companyName",t)},expression:"userFrom.companyName"}},e._l(e.companyData,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"归属部门",prop:"officeName"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择归属部门",filterable:"",disabled:e.selectBranch,clearable:""},model:{value:e.userFrom.officeName,callback:function(t){e.$set(e.userFrom,"officeName",t)},expression:"userFrom.officeName"}},e._l(e.departData,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工号",prop:"no"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.no,callback:function(t){e.$set(e.userFrom,"no",t)},expression:"userFrom.no"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.name,callback:function(t){e.$set(e.userFrom,"name",t)},expression:"userFrom.name"}})],1)],1)],1),e._v(" "),e.passwordHidden?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录名",prop:"loginName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.loginName,callback:function(t){e.$set(e.userFrom,"loginName",t)},expression:"userFrom.loginName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{size:"small",type:"password"},model:{value:e.userFrom.password,callback:function(t){e.$set(e.userFrom,"password",t)},expression:"userFrom.password"}})],1)],1)],1):e._e(),e._v(" "),a("el-row",[e.passwordHidden?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"确认密码",prop:"passwordConfirm"}},[a("el-input",{attrs:{size:"small",type:"password"},model:{value:e.userFrom.passwordConfirm,callback:function(t){e.$set(e.userFrom,"passwordConfirm",t)},expression:"userFrom.passwordConfirm"}})],1)],1):e._e(),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.phone,callback:function(t){e.$set(e.userFrom,"phone",t)},expression:"userFrom.phone"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"telePhone"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.telePhone,callback:function(t){e.$set(e.userFrom,"telePhone",t)},expression:"userFrom.telePhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否登陆",prop:"loginFlag"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:e.userFrom.loginFlag,callback:function(t){e.$set(e.userFrom,"loginFlag",t)},expression:"userFrom.loginFlag"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"userSex"}},[[a("el-radio",{attrs:{label:"1"},model:{value:e.userFrom.userSex,callback:function(t){e.$set(e.userFrom,"userSex",t)},expression:"userFrom.userSex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.userFrom.userSex,callback:function(t){e.$set(e.userFrom,"userSex",t)},expression:"userFrom.userSex"}},[e._v("女")])]],2)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ְ职务",prop:"duties"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.duties,callback:function(t){e.$set(e.userFrom,"duties",t)},expression:"userFrom.duties"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.email,callback:function(t){e.$set(e.userFrom,"email",t)},expression:"userFrom.email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userFrom.remarks,callback:function(t){e.$set(e.userFrom,"remarks",t)},expression:"userFrom.remarks"}})],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnBlue",attrs:{size:"small"},on:{click:e.userConfirm}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.userManageOpen=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"参与项目",center:"",visible:e.partProjectOpen,"close-on-click-modal":!1},on:{"update:visible":function(t){e.partProjectOpen=t}}},[a("div",{staticClass:"fl headTitle"},[a("p",{staticClass:"fl"},[e._v("项目管理列表")]),a("span",{},[e._v("list")])]),e._v(" "),a("el-table",{attrs:{border:"",data:e.partProjectTable}},[a("el-table-column",{attrs:{label:"项目编码",prop:"projectCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",prop:"projectName"}}),e._v(" "),a("el-table-column",{attrs:{label:"合同编码",prop:"contract.contractCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"合同名称",prop:"contract.contractName"}}),e._v(" "),a("el-table-column",{attrs:{label:"合同签订日期",prop:"contract.signDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"开工日期",prop:"startDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"竣工日期",prop:"endDate"}})],1),e._v(" "),a("div",{staticClass:"footerR"},[a("el-pagination",{attrs:{total:e.partProjectList.total,"current-page":e.partProjectList.currentPage,"page-size":e.partProjectList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.partProjectCurrentPageM,"size-change":e.partProjectPageSizeM}})],1),e._v(" "),a("div",{staticStyle:{clear:"both"}}),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){e.partProjectOpen=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var se=a("VU/8")(ae,re,!1,function(e){a("2hJ8")},"data-v-633b61d6",null).exports,ie={data:function(){return{loginForm:{userName:"",password:""},loginRules:{userName:[{required:!0,message:"此项必填"}],password:[{required:!0,message:"此项必填"}]}}},methods:{LoginIn:function(){var e=this;this.$refs.loginRef.validate(function(t){t&&(e.$router.push({path:"/view/cameraInitialization"}),console.log("登陆成功"))})}},computed:{},components:{},created:function(){},mounted:function(){}},oe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loginContainer"},[r("div",{staticClass:"bgImg"},[r("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a("xDWF")}}),e._v(" "),r("el-form",{ref:"loginRef",staticClass:"loginForm",attrs:{size:"small",model:e.loginForm,rules:e.loginRules,"label-position":"left","auto-complete":"on"}},[r("div",{staticClass:"loginTitle"},[r("h3",{staticClass:"title"},[e._v("变电站视频智能分析系统")])]),e._v(" "),r("el-form-item",{attrs:{prop:"userName"}},[r("el-input",{attrs:{placeholder:"账号",type:"text","auto-complete":"on",autofocus:"autofocus",clearable:""},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"密码",type:"password","auto-complete":"on",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.LoginIn(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("el-button",{staticClass:"loginBtn",staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.LoginIn(t)}}},[e._v("登录")])],1)],1)])},staticRenderFns:[]};var ne=a("VU/8")(ie,oe,!1,function(e){a("zjJI")},"data-v-6f995809",null).exports,le={data:function(){return{previewOpen:!1,pictureUrl:"",Textcenter:{"text-align":"center"},cameralayoutList:{total:0,currentPage:1,pageSize:10},layoutData:[]}},methods:{openView:function(e){var t=this;this.previewOpen=!0,this.pictureUrl=e.videoUrl,setTimeout(function(){document.getElementById("video").src=t.pictureUrl},1e3)},reloadPreview:function(){""!=this.pictureUrl&&(document.getElementById("video").src=this.pictureUrl)},queryImgList:function(){var e=this;this.$api.pubApi.post("/substation/index/getVideoList",{pageNo:this.cameralayoutList.currentPage,pageSize:this.cameralayoutList.pageSize},function(t){console.log(t),e.layoutData=t.data.rows,e.cameralayoutList.total=t.data.total})},preview:function(e){var t=this;this.rotateParameter.cameraPort=e.cameraPort,this.rotateParameter.cameraIp=e.cameraIp,this.rotateParameter.username=e.username,this.rotateParameter.password=e.password,this.loading=!0,this.previewId=e.cameraId,this.previewFrom.cameraNum=e.cameraNum,this.getPreset(),this.$api.pubApi.post("/substation/camera/getVideo",{ip:e.cameraIp,username:e.username,password:e.password,channel:e.channlsNo,port:e.cameraPort,feed:e.feed},function(e){t.loading=!1,console.log(e),t.pid=e.data.pid,sessionStorage.setItem("pid",t.pid),t.pictureUrl=e.data.picture,document.getElementById("video").src=e.data.picture}),this.previewOpen=!0},closeThen:function(){},layoutLCurrentPageM:function(e){this.cameralayoutList.currentPage=e,this.queryLayout()},layoutPageSizeM:function(){this.cameralayoutList.pageSize=val,this.queryLayout()}},computed:{},components:{},created:function(){},mounted:function(){this.queryImgList()}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-table",{attrs:{data:e.layoutData,border:"","header-cell-style":e.Textcenter,"cell-style":e.Textcenter}},[a("el-table-column",{attrs:{label:"图片地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{color:"#1b67f6",cursor:"pointer"}},[e._v("\n          "+e._s(t.row.videoUrl)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{color:"#1b67f6",cursor:"pointer"}},[e._v("\n          "+e._s(t.row.name)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{color:"#1b67f6",cursor:"pointer"}},[e._v("\n          "+e._s(t.row.creatTime)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnYellow",attrs:{size:"small"},on:{click:function(a){e.openView(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("el-footer",[a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{total:e.cameralayoutList.total,"current-page":e.cameralayoutList.currentPage,"page-size":e.cameralayoutList.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.layoutLCurrentPageM,"size-change":e.layoutPageSizeM}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{width:"70%",title:"预览",center:"","close-on-click-modal":!1,visible:e.previewOpen},on:{"update:visible":function(t){e.previewOpen=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-card",[a("div",[a("video",{attrs:{id:"video",width:"100%",height:"100%",autoplay:"autoplay"}},[a("source",{attrs:{type:"video/webm"}}),e._v(" "),a("source")])])])],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:e.reloadPreview}},[e._v("刷新")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.previewOpen=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var me=a("VU/8")(le,ce,!1,function(e){a("/4G7")},"data-v-22092bb1",null).exports,ue={data:function(){return{previewOpen:!1,camerRow:[],mapArr:[],pid:""}},methods:{reloadPreview:function(){""!=this.pictureUrl&&(document.getElementById("video").src=this.pictureUrl)},preview:function(e){var t=this;this.$api.pubApi.post("/substation/camera/getVideo",{ip:e.cameraIp,username:e.username,password:e.password,channel:e.channlsNo,port:e.cameraPort,feed:e.feed},function(e){t.pid=e.data.pid,sessionStorage.setItem("pid",t.pid),t.pictureUrl=e.data.picture,document.getElementById("video").src=e.data.picture}),this.previewOpen=!0}},computed:{},components:{},created:function(){this.$route.params.item&&(this.camerRow=this.$route.params.item,this.mapArr=this.$route.params.mapArr,console.log())},mounted:function(){if(this.mapArr)for(var e=0;e<this.mapArr.length;e++){D()(".info").append("<div class='dot'></div>");var t=this.mapArr[e].MapX,a=this.mapArr[e].MapY;t<0?t=0:t>800&&(t=800),a<0?a=80:a>500&&(a=500),D()(".dot").html('<icon class="el-icon-location-outline"></icon>'),D()(".dot").css({color:"red",position:"absolute",left:t+"px",top:a+"px","text-aligin":"center","font-size":"14px"})}else this.$toast("识别无数据","warning");this.preview(this.camerRow)}},de={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mapLocation"},[t("el-container",[t("el-aside",{attrs:{width:"50%"}},[t("el-card",[t("video",{attrs:{id:"video",width:"100%",height:"80%",autoplay:"autoplay"}},[t("source",{attrs:{type:"video/webm"}}),this._v(" "),t("source")]),this._v(" "),t("el-button",{staticClass:"btnGreen",attrs:{size:"small"},on:{click:this.reloadPreview}},[this._v("刷新")])],1)],1),this._v(" "),t("el-main")],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(ue,de,!1,function(e){a("tuL1")},"data-v-6a488532",null).exports;r.default.use(m.a);var he=new m.a({routes:[{path:"/",component:ne,redirect:"/view/login/login"},{path:"/view/login/login",name:"login",component:ne},{path:"/view/main",name:"main",component:_,children:[{path:"/view/cameraInitialization",name:"cameraInitialization",component:F},{path:"/view/cameraTime",name:"cameraTime",component:U},{path:"/view/cameraLayout",name:"cameraLayout",component:z},{path:"/view/cameraLayoutDetail/:id",name:"cameraLayoutDetail",component:N},{path:"/view/timeMacro",name:"timeMacro",component:B},{path:"/view/customTask",name:"customTask",component:L},{path:"/view/arithmeticSetting",name:"arithmeticSetting",component:H},{path:"/view/alarmLog",name:"alarmLog",component:X},{path:"/view/picturePunctuation",name:"picturePunctuation",component:Q},{path:"/view/userManagement",name:"userManagement",component:se},{path:"/view/roleManagement",name:"roleManagement",component:te},{path:"/view/pictureSynthesis",name:"pictureSynthesis",component:me},{path:"/view/mapLocation",name:"mapLocation",component:pe}]}]}),fe={state:{isCollapse:!1,theme:"style-default"},getters:{},mutations:{changeIsCollapse:function(e){e.isCollapse=!e.isCollapse},CHANGETHEME:function(e,t){switch(t){case"default":e.theme="style-default",localStorage.setItem("ci_theme","default");break;case"simple":e.theme="style-simple",localStorage.setItem("ci_theme","simple");break;case"dark":e.theme="style-dark",localStorage.setItem("ci_theme","dark")}}},actions:{}},ve=a("//Fk"),ge=a.n(ve),be=a("mtWM"),ye=a.n(be),_e=ye.a.create({timeout:8e4});ye.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",ye.a.interceptors.request.use(function(e){return e},function(e){return ge.a.reject(e)}),ye.a.interceptors.response.use(function(e){return e},function(e){return ge.a.reject(e)});var we=_e,Ce=a("mw3O"),ke=a.n(Ce),Fe={post:function(e,t,a){return we.post(""+w.alarmUrl+e,ke.a.stringify(t)).then(function(e){a(e)}).catch()},get:function(e,t,a){return we.get(""+w.alarmUrl+e,{params:t}).then(function(e){a(e)}).catch()}},Pe={state:{flag:!1,imgSrc:[]},mutations:{triggerAlarm:function(e,t){console.log(t),e.imgSrc=t},triggerDialog:function(e,t){e.flag=t}},actions:{getAlarm:function(e,t){console.log(t),setInterval(function(){Fe.get("/fires",{},function(t){t.data.length>0?(e.commit("triggerDialog",!0),e.commit("triggerAlarm",t.data)):e.commit("triggerDialog",!1)})},3e5)}}};r.default.use(o.a);var xe=new o.a.Store({modules:{sidebar:fe,alarm:Pe}}),ze=a("zL8q"),Se=a.n(ze),$e=(a("tvR6"),a("eDDz"),a("NBiq")),Ne=a.n($e),Te=(a("g3Gj"),a("5LIk"),a("4CPX"),{login:{login:function(e){return we.post(w.url+"basedata/userinfos/userInfos/login",ke.a.stringify(e))}},pubApi:{get:function(e,t,a){return we.get(""+w.url+e,{params:t}).then(function(e){console.log(e),a(e)}).catch()},post:function(e,t,a){return we.post(""+w.url+e,ke.a.stringify(t)).then(function(e){a(e)}).catch()},dict:function(e,t){return we.get(w.url+"/projectmanage/dict/find_value_by_type",{params:{dictType:e}}).then(function(e){t(e)}).catch()}},server:{post:function(e,t,a){return we.post(""+w.serverUrl+e,ke.a.stringify(t)).then(function(e){a(e)}).catch()},get:function(e,t,a){return we.get(""+w.serverUrl+e,{params:t}).then(function(e){a(e)}).catch()}},alarm:Fe});var De=function(e,t){this.$message({message:e,type:t,showClose:!0})},Ie={bind:function(e,t,a){var r=e.querySelector(".el-dialog__header"),s=e.querySelector(".el-dialog");r.style.cssText+=";cursor:move;",s.style.cssText+=";top:0px;";var i=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};r.onmousedown=function(e){var t=e.clientX-r.offsetLeft,o=e.clientY-r.offsetTop,n=s.offsetWidth,l=s.offsetHeight,c=document.body.clientWidth,m=document.body.clientHeight,u=s.offsetLeft,d=c-s.offsetLeft-n,p=s.offsetTop,h=m-s.offsetTop-l,f=i(s,"left"),v=i(s,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),v=+document.body.clientHeight*(+v.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),v=+v.replace(/\px/g,"")),document.onmousemove=function(e){var r=e.clientX-t,i=e.clientY-o;-r>u?r=-u:r>d&&(r=d),-i>p?i=-p:i>h&&(i=h),s.style.cssText+=";left:"+(r+f)+"px;top:"+(i+v)+"px;",a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},Le=function(e){e.directive("el-drag-dialog",Ie)};window.Vue&&(window["el-drag-dialog"]=Ie,Vue.use(Le)),Ie.install=Le;var Oe=Ie,Re={dateFormat:function(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}},qe=[],Me=1,Ue=[],je=[];var Ae=a("XLwt"),Be=a.n(Ae);a("X4tn"),a("1oTD");r.default.use(Se.a),r.default.config.productionTip=!1,r.default.use(Ne.a),r.default.prototype.$axios=ye.a,r.default.prototype.$api=Te,r.default.prototype.$getConfirm=function(e,t,a){this.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"confirmButtonStyle",center:!0}).then(function(){return we.get(""+w.url+e,{params:t}).then(function(e){a(e)}).catch()}).catch(function(){})},r.default.prototype.$postConfirm=function(e,t,a){this.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"confirmButtonStyle",center:!0}).then(function(){return we.post(""+w.url+e,ke.a.stringify(t)).then(function(e){a(e)}).catch()}).catch(function(){})},r.default.prototype.$toast=De,r.default.use(Oe),r.default.prototype.$dateFormat=Re,r.default.prototype.$coordinate=function(e){if("imgTwoId"==(t=D()(e.target).attr("id"))){if(0==Ue.length)return void this.$toast("请先点击左边图片","error");if(je.length==Ue.length)return void this.$toast("不可超过左边图中图标个数","error");e=e||window.event;var t="#"+D()(e.target).attr("id"),a=D()(t).width(),r=D()(t).height(),s=e.pageX-D()(t).offset().left,i=e.pageY-D()(t).offset().top,o=400*(s/a).toFixed(5)+"px",n=200*(i/r).toFixed(5)+"px",l="<div class='dot'></div>";D()(t).after(l);var c={mapX:o,mapY:n};je.push(c),console.log(je,"right")}else{e=e||window.event,t="#"+D()(e.target).attr("id"),a=D()(t).width(),r=D()(t).height(),s=e.pageX-D()(t).offset().left,i=e.pageY-D()(t).offset().top,o=400*(s/a).toFixed(5)+"px",n=200*(i/r).toFixed(5)+"px",l="<div class='dot'></div>",D()(t).after(l);var m={picX:o,picY:n};Ue.push(m),console.log(Ue,"leff")}if(je.length==Ue.length){for(var u=0;u<Ue.length;u++)Ue[u].mapX=je[u].mapX,Ue[u].mapY=je[u].mapY;qe=Ue}else 0==qe.length&&qe.push(m);sessionStorage.setItem("leftArr",J()(Ue)),sessionStorage.setItem("rightArr",J()(je)),console.log(qe,"aee");var d=sessionStorage.getItem("key");d=JSON.parse(d),1==Me&&null!=d&&(qe=qe.concat(d)),sessionStorage.setItem("key",J()(qe)),D()(t).next().html('<icon class="el-icon-location-outline"></icon>'),D()(t).next().css({color:"red",position:"absolute",left:o,top:n,"text-aligin":"center","font-size":"14px"}),Me++},r.default.prototype.$echarts=Be.a,new r.default({el:"#app",store:xe,router:he,components:{App:c},template:"<App/>"})},TMSi:function(e,t){},X4tn:function(e,t){},ZXhK:function(e,t){},bZri:function(e,t){},eDDz:function(e,t){},fp1c:function(e,t){},g3Gj:function(e,t){},juDD:function(e,t){},lrHp:function(e,t){},n3jj:function(e,t){},spGG:function(e,t){},t0vD:function(e,t){},tuL1:function(e,t){},tvR6:function(e,t){},vA7V:function(e,t){e.exports={_args:[["videojs-swf@5.4.1","D:\\smart\\substation-management-system"]],_from:"videojs-swf@5.4.1",_id:"videojs-swf@5.4.1",_inBundle:!1,_integrity:"sha1-IHfvccdJ8seCPvSbq65N0qywj4c=",_location:"/videojs-swf",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"videojs-swf@5.4.1",name:"videojs-swf",escapedName:"videojs-swf",rawSpec:"5.4.1",saveSpec:null,fetchSpec:"5.4.1"},_requiredBy:["/videojs-flash"],_resolved:"https://registry.npmjs.org/videojs-swf/-/videojs-swf-5.4.1.tgz",_spec:"5.4.1",_where:"D:\\smart\\substation-management-system",author:{name:"Brightcove"},bugs:{url:"https://github.com/videojs/video-js-swf/issues"},copyright:"Copyright 2014 Brightcove, Inc. https://github.com/videojs/video-js-swf/blob/master/LICENSE",description:"The Flash-fallback video player for video.js (http://videojs.com)",devDependencies:{async:"~0.2.9",chg:"^0.3.2","flex-sdk":"4.6.0-0",grunt:"~0.4.0","grunt-bumpup":"~0.5.0","grunt-cli":"~0.1.0","grunt-connect":"~0.2.0","grunt-contrib-jshint":"~0.4.3","grunt-contrib-qunit":"~0.2.1","grunt-contrib-watch":"~0.1.4","grunt-npm":"~0.0.2","grunt-prompt":"~0.1.2","grunt-shell":"~0.6.1","grunt-tagrelease":"~0.3.1",qunitjs:"~1.12.0","video.js":"^5.9.2"},homepage:"http://videojs.com",keywords:["flash","video","player"],name:"videojs-swf",repository:{type:"git",url:"git+https://github.com/videojs/video-js-swf.git"},scripts:{version:"chg release -y && grunt dist && git add -f dist/ && git add CHANGELOG.md"},version:"5.4.1"}},xDWF:function(e,t,a){e.exports=a.p+"static/img/left.c2a65af.png"},zjJI:function(e,t){}},["NHnr"]);