(function(t){function e(e){for(var n,s,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)s=r[p],i[s]&&d.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"05b4":function(t,e,a){},1:function(t,e){},"11f9":function(t,e,a){"use strict";var n=a("6cd6"),i=a.n(n);i.a},"1cdd":function(t,e,a){"use strict";var n=a("05b4"),i=a.n(n);i.a},"1f0f":function(t,e,a){"use strict";var n=a("f9c9"),i=a.n(n);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],s={name:"App",data:function(){return{}},methods:{},created:function(){}},r=s,l=(a("034f"),a("2877")),c=Object(l["a"])(r,i,o,!1,null,null,null),u=c.exports,p=a("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loginContainer"},[n("van-action-sheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}}),n("van-row",{staticStyle:{width:"90%","margin-left":"5%","margin-top":"20px"},attrs:{type:"flex",justify:"space-between"}},[n("van-col",{staticStyle:{"text-align":"left",color:"white","font-size":"20px"},attrs:{span:"18"}},[n("span",{on:{click:t.tologin}},[t._v("智轨交通")])]),n("van-col",{staticStyle:{"text-align":"right",color:"white","font-size":"20px"},attrs:{span:"6"}},[n("van-icon",{attrs:{name:"setting-o"},on:{click:function(e){t.isShow=!0}}})],1)],1),n("div",{staticStyle:{"margin-top":"30%"}},[n("img",{staticStyle:{"border-radius":"5px"},attrs:{src:a("f074")},on:{click:t.toFace}})]),n("van-popup",{model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[n("img",{staticStyle:{"border-radius":"5px",width:"330px",height:"330px"},attrs:{src:t.imgUrl}})])],1)},g=[],f=(a("7f7f"),{data:function(){return{users:{},dialogVisible:!1,imgUrl:"",id:"",isShow:!1,actions:[{name:"行车记录",path:""},{name:"退出登录",path:""}]}},methods:{toFace:function(){this.$router.push({path:"/views/main/face"})},toErweima:function(){var t=this;this.dialogVisible=!0,this.$api.pubApi.get("/api/qrcode/getQrcode",{id:this.users.id},function(e){console.log(e),e.data.flag?(t.imgUrl=e.data.data,t.dialogVisible=!0):t.$toast.fail(e.data.msg)})},toverificaty:function(){this.$router.push({path:"/views/main/verificaty"})},tologin:function(){this.$router.push({path:"/"})},onSelect:function(t){var e=this;this.isShow=!1,"行车记录"==t.name?this.$router.push({path:"/views/charts"}):"退出登录"==t.name&&(console.log(this.id),this.$api.pubApi.post("/api/user/socketIo/logout",{userid:this.users.id},function(t){console.log(t),t.data.flag?(sessionStorage.removeItem("traffic_user"),e.tologin()):e.$toast.fail(t.data.msg)}))}},computed:{},components:{},created:function(){},mounted:function(){this.users=JSON.parse(sessionStorage.getItem("traffic_user")),this.$socket.connect()},sockets:{connect:function(){this.id=this.$socket.id,this.$socket.emit("login",this.users.id),console.log(this.id+"---socket connected---")},login:function(t){console.log(t)},SweepCode:function(t){t.flag&&(this.dialogVisible=!1,this.$toast.success(t.msg)),console.log(t)},disconned:function(){console.log("this.sockets.connected")}},beforeDestory:{}}),m=f,h=(a("c30a"),Object(l["a"])(m,d,g,!1,null,"3c392f64",null)),v=h.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("img",{staticStyle:{width:"100px",height:"100px","margin-top":"30%","margin-bottom":"10%"},attrs:{src:a("a168")}}),n("van-button",{staticStyle:{width:"80%","margin-top":"20px",color:"white","background-color":"firebrick"},attrs:{plain:"",hairline:"",size:"small"},on:{click:t.LoginIn}},[t._v("登录")]),n("van-button",{staticStyle:{width:"80%","margin-top":"20px",color:"white","background-color":"firebrick"},attrs:{plain:"",hairline:"",size:"small"},on:{click:t.Register}},[t._v("注册")])],1)},b=[],x={data:function(){return{}},methods:{LoginIn:function(){this.$router.push({path:"/views/login/login"})},Register:function(){this.$router.push({path:"/views/login/register"})}},computed:{},components:{},created:function(){},mounted:function(){}},y=x,$=(a("11f9"),Object(l["a"])(y,w,b,!1,null,"2ebd7678",null)),S=$.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("van-nav-bar",{staticClass:"nav-bar",attrs:{title:"登录","left-text":"返回","right-text":"注册","left-arrow":""},on:{"click-left":t.back,"click-right":t.goRegister}}),n("img",{staticStyle:{width:"100px",height:"100px",margin:"10%"},attrs:{src:a("a168")}}),n("van-cell-group",{staticStyle:{width:"80%","margin-left":"10%",opacity:"0.7"}},[n("van-field",{attrs:{label:"手机号","label-width":"50px","left-icon":"contact","input-align":"center",placeholder:"请输入手机号","error-message":t.loginRules.userName.message},on:{input:t.loginRules_username},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName",e)},expression:"loginForm.userName"}}),n("van-field",{attrs:{label:"密码","label-width":"50px","left-icon":"closed-eye",type:"password",placeholder:"请输入密码","input-align":"center","error-message":t.loginRules.password.message},on:{input:t.loginRules_password},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),n("van-button",{staticStyle:{width:"80%","margin-top":"20px",opacity:"0.7"},attrs:{plain:"",hairline:"",type:"danger",size:"small"},on:{click:t.LoginIn}},[t._v("登录")])],1)},_=[],k={data:function(){return{loginForm:{userName:"",password:""},loginRules:{userName:[{message:""}],password:[{message:""}]}}},methods:{LoginIn:function(){var t=this;this.$api.pubApi.post("/api/user/login",{accountNumber:this.loginForm.userName,password:this.loginForm.password},function(e){console.log(e.data),e.data.flag?(t.$toast.success(e.data.msg),sessionStorage.setItem("traffic_user",JSON.stringify(e.data.data)),t.$router.push({path:"/views/main"})):t.$toast.fail(e.data.msg)})},back:function(){this.$router.push({path:"/views/login/loginMain"})},goRegister:function(){this.$router.push({path:"/views/login/register"})},loginRules_username:function(t){this.loginRules.userName.message=""==t?"手机号码必填":""},loginRules_password:function(t){this.loginRules.password.message=""==t?"密码不能为空":""}},computed:{},components:{},created:function(){},mounted:function(){}},R=k,U=(a("6d4a"),Object(l["a"])(R,C,_,!1,null,"2ba792f4",null)),F=U.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loginContainer"},[n("van-nav-bar",{staticClass:"nav-bar",attrs:{title:"注册","left-text":"返回","right-text":"登录","left-arrow":""},on:{"click-left":t.back,"click-right":t.goRegister}}),n("img",{staticStyle:{width:"100px",height:"100px",margin:"10%"},attrs:{src:a("a168")}}),n("van-cell-group",{staticStyle:{width:"80%","margin-left":"10%"}},[n("van-field",{attrs:{label:"手机号","label-width":"50px","left-icon":"contact","input-align":"center",placeholder:"请输入手机号","error-message":t.loginRules.userName.message},on:{input:t.loginRules_username},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName",e)},expression:"loginForm.userName"}}),n("van-field",{attrs:{label:"密码","label-width":"50px","left-icon":"eye-o",type:"password",placeholder:"请输入密码","input-align":"center","error-message":t.loginRules.password.message},on:{input:t.loginRules_password},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),n("van-field",{attrs:{label:"确认","label-width":"50px","left-icon":"closed-eye",type:"password",placeholder:"请再次输入密码","input-align":"center","error-message":t.loginRules.passwordTwo.message},on:{input:t.loginRules_passwordTwo},model:{value:t.loginForm.passwordTwo,callback:function(e){t.$set(t.loginForm,"passwordTwo",e)},expression:"loginForm.passwordTwo"}})],1),n("van-button",{staticStyle:{width:"80%","margin-top":"20px",opacity:"0.7"},attrs:{plain:"",hairline:"",type:"danger",size:"small"},on:{click:t.Register}},[t._v("注册")])],1)},O=[],T={data:function(){return{loginForm:{userName:"",password:"",passwordTwo:""},loginRules:{userName:[{message:"此项必填"}],password:[{message:"此项必填"}],passwordTwo:[{message:"此项必填"}]}}},methods:{Register:function(){var t=this;this.$api.pubApi.post("/api/user/register",{accountNumber:this.loginForm.userName,password:this.loginForm.password},function(e){console.log(e),e.data.flag?(t.$toast.success(e.data.msg),sessionStorage.setItem("traffic_user",JSON.stringify(e.data.data)),t.$router.push({path:"/views/main"})):t.$toast.fail(e.data.msg)})},back:function(){this.$router.push({path:"/views/login/loginMain"})},goRegister:function(){this.$router.push({path:"/views/login/login"})},loginRules_username:function(t){this.loginRules.userName.message=""==t?"手机号码必填":""},loginRules_password:function(t){this.loginRules.password.message=""==t?"密码不能为空":""},loginRules_passwordTwo:function(t){""==t?this.loginRules.passwordTwo.message="确认密码不能为空":t!=this.loginForm.password?this.loginRules.passwordTwo.message="密码不一致":this.loginRules.passwordTwo.message=""}},computed:{},components:{},created:function(){},mounted:function(){}},I=T,P=(a("1cdd"),Object(l["a"])(I,N,O,!1,null,"ec1dcb84",null)),j=P.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginContainer"},[a("van-nav-bar",{staticClass:"nav-bar",attrs:{title:"人脸信息注册","left-text":"返回","left-arrow":""},on:{"click-left":t.back}}),a("van-cell-group",{staticStyle:{width:"80%","margin-left":"10%",opacity:"0.7","margin-top":"10px"}},[a("van-field",{attrs:{label:"姓名","label-width":"50px","left-icon":"contact","input-align":"center",placeholder:"请输入姓名","error-message":t.loginRules.userName.message},on:{input:t.loginRules_username},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName",e)},expression:"loginForm.userName"}}),a("van-field",{attrs:{label:"身份证","label-width":"50px","left-icon":"idcard",placeholder:"请输入身份证","input-align":"center","error-message":t.loginRules.idCard.message},on:{input:t.loginRules_idCard},model:{value:t.loginForm.idCard,callback:function(e){t.$set(t.loginForm,"idCard",e)},expression:"loginForm.idCard"}})],1),a("p",{staticStyle:{"line-height":"0px"}},[t._v("本人正面照")]),a("van-uploader",{attrs:{multiple:"","after-read":t.setUserAvatar,capture:"camera","max-count":1,"preview-size":"180px"},model:{value:t.uploadface,callback:function(e){t.uploadface=e},expression:"uploadface"}},[t.imageUrlShow?a("img",{staticStyle:{width:"180px",height:"180px"},attrs:{src:t.imageUrl}}):t._e()]),a("p",{staticStyle:{"line-height":"0px"}},[t._v("本人身份证")]),a("van-uploader",{attrs:{multiple:"","after-read":t.setUserCardAvatar,capture:"camera","preview-size":"180px","max-count":1},model:{value:t.uploadCard,callback:function(e){t.uploadCard=e},expression:"uploadCard"}},[t.imageUrlShow?a("img",{staticStyle:{width:"180px",height:"180px"},attrs:{src:t.imageCardUrl}}):t._e()]),a("van-button",{staticStyle:{width:"70%","margin-top":"2%",opacity:"0.7"},attrs:{plain:"",hairline:"",type:"danger",size:"small"},on:{click:t.Submission}},[t._v("提交")])],1)},z=[],E=(a("a481"),{url:"http://192.168.1.12:7530",serverUrl:"http://192.168.1.12:7530",socketUrl:"http://192.168.1.12:9092"}),B=E,M={data:function(){return{loginForm:{userName:"",idCard:""},loginRules:{userName:[{message:"此项必填"}],idCard:[{message:"此项必填"}]},users:{},faceUrl:B.url+"/api/document/upImage/pesonalPicture",cardUrl:B.url+"/api/document/upImage/frontPhotoOfIdCardUrl",imageUrl:"",imageCardUrl:"",id:"",uploadface:[],uploadCard:[],imageUrlShow:!1}},methods:{Submission:function(){var t=this;this.$api.pubApi.post("/api/user/updateUser",{id:this.users.id,realName:this.loginForm.userName,phone:this.users.phone,idCard:this.loginForm.idCard,pesonalPictureUrl:this.users.pesonalPictureUrl,frontPhotoOfIdCardUrl:this.users.frontPhotoOfIdCardUrl},function(e){console.log(e.data),e.data.flag?(t.$toast.success(e.data.msg),sessionStorage.setItem("traffic_user",JSON.stringify(e.data.data)),t.back()):t.$toast.fail(e.data.msg)})},back:function(){this.$router.push({path:"/views/main"})},loginRules_username:function(t){this.loginRules.userName.message=""==t?"姓名不能为空":""},loginRules_idCard:function(t){this.loginRules.idCard.message=""==t?"身份证不能为空":""},setUserAvatar:function(t){this.loading=!0;var e=[],a=this;this.$lrz(t.content).then(function(t){e=t.base64,console.log(e),a.uploadImge(e,a.faceUrl,"face")})},setUserCardAvatar:function(t){this.loading=!0;var e=[],a=this;this.$lrz(t.content).then(function(t){e=t.base64,console.log(e),a.uploadImge(e,a.cardUrl,"card")})},sizeError:function(){this.$toast.fail("图片大小超过2M!")},uploadImge:function(t,e,a){var n=this;this.$axios.post(e,{id:this.users.id,file:t.replace(/data:image\/.*;base64,/,"")}).then(function(t){console.log(t),t.data.flag&&("face"==a?n.users.pesonalPictureUrl=t.data.data:n.users.frontPhotoOfIdCardUrl=t.data.data),n.loading=!1})}},computed:{},components:{},created:function(){},mounted:function(){this.users=JSON.parse(sessionStorage.getItem("traffic_user")),console.log(this.users),null!=this.users.frontPhotoOfIdCardUrl&&null!=this.users.pesonalPictureUrl&&(this.imageUrl=this.users.pesonalPictureUrl,this.imageCardUrl=this.users.frontPhotoOfIdCardUrl,this.loginForm.userName=this.users.realName,this.loginForm.idCard=this.users.idCard,this.imageUrlShow=!0)}},L=M,J=(a("1f0f"),Object(l["a"])(L,A,z,!1,null,"08875b90",null)),V=J.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginContainer"},[a("van-nav-bar",{staticClass:"nav-bar",attrs:{title:"当天时段人数","left-text":"返回","left-arrow":""},on:{"click-left":t.back}}),a("div",{style:{width:"360px",height:"300px"},attrs:{id:"myChart1"}}),a("div",{style:{width:"360px",height:"300px"},attrs:{id:"myChart2"}})],1)},D=[],q={data:function(){return{updata:{value:[],time:[]},lowerdata:{value:[],time:[]}}},methods:{back:function(){this.$router.push({path:"/views/main"})},getData:function(){var t=this;this.$api.pubApi.get("/api/statistics/record",{},function(e){console.log(e),e.data.flag?(t.updata.time=e.data.data.GetOnTheTrainTime,t.updata.value=e.data.data.GetOnTheTrain,t.lowerdata.time=e.data.data.GetOffTheTrainTime,t.lowerdata.value=e.data.data.GetOffTheTrain,t.drawLineUp(),t.drawLinelower()):t.$toast(e.data.msg)})},drawLineUp:function(){var t=this.$echarts.init(document.getElementById("myChart1"));t.setOption({title:{text:"时段上车人数"},tooltip:{},xAxis:{data:this.updata.time},yAxis:{type:"value",max:50},series:[{type:"line",data:this.updata.value}]})},drawLinelower:function(){var t=this.$echarts.init(document.getElementById("myChart2"));t.setOption({title:{text:"时段下车人数"},tooltip:{},xAxis:{data:this.lowerdata.time},yAxis:{type:"value",max:50},series:[{type:"line",data:this.lowerdata.value}]})}},computed:{},components:{},created:function(){},mounted:function(){this.users=JSON.parse(sessionStorage.getItem("traffic_user")),this.getData()}},Q=q,H=(a("706a"),Object(l["a"])(Q,G,D,!1,null,"3ace1aa6",null)),K=H.exports;n["a"].use(p["a"]);var W=new p["a"]({routes:[{path:"/",component:S,redirect:"/views/login/loginMain",meta:{withoutLogin:!0}},{path:"/views/login/loginMain",component:S,name:"loginMain"},{path:"/views/login/login",component:F,name:"login"},{path:"/views/login/register",component:j,name:"register"},{path:"/views/main",name:"main",component:v},{path:"/views/main/face",name:"face",component:V},{path:"/views/charts",name:"charts",component:K}]}),X=a("2f62");n["a"].use(X["a"]);var Y=new X["a"].Store({state:{},mutations:{},actions:{}}),Z=a("0a12"),tt=a.n(Z),et=a("8055"),at=a.n(et),nt=a("b970"),it=a("313e"),ot=a.n(it),st=(a("157a"),a("6ca8")),rt=a.n(st),lt=a("bc3a"),ct=a.n(lt),ut=ct.a.create({timeout:8e4});ct.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",ct.a.interceptors.request.use(function(t){return t},function(t){return Promise.reject(t)}),ct.a.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)});var pt=ut,dt=a("4328"),gt=a.n(dt),ft={get:function(t,e,a){return pt.get("".concat(B.url).concat(t),{params:e}).then(function(t){console.log(t),a(t)}).catch()},post:function(t,e,a){return pt.post("".concat(B.url).concat(t),gt.a.stringify(e)).then(function(t){a(t)}).catch()}},mt=ft,ht={login:function(t){return pt.post("".concat(B.url,"basedata/userinfos/userInfos/login"),gt.a.stringify(t))}},vt=ht,wt={post:function(t,e,a){return pt.post("".concat(B.serverUrl).concat(t),gt.a.stringify(e)).then(function(t){a(t)}).catch()},get:function(t,e,a){return pt.get("".concat(B.serverUrl).concat(t),{params:e}).then(function(t){a(t)}).catch()}},bt=wt,xt={login:vt,pubApi:mt,server:bt};function yt(t,e,a){this.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"confirmButtonStyle",center:!0}).then(function(){return pt.get("".concat(B.url).concat(t),{params:e}).then(function(t){a(t)}).catch()}).catch(function(){})}function $t(t,e,a){this.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"confirmButtonStyle",center:!0}).then(function(){return pt.post("".concat(B.url).concat(t),gt.a.stringify(e)).then(function(t){a(t)}).catch()}).catch(function(){})}n["a"].prototype.$lrz=rt.a,n["a"].prototype.$echarts=ot.a,n["a"].use(nt["a"]),n["a"].use(tt.a,at()(B.socketUrl)),n["a"].config.productionTip=!1,n["a"].prototype.$axios=ct.a,n["a"].prototype.$api=xt,n["a"].prototype.$getConfirm=yt,n["a"].prototype.$postConfirm=$t,new n["a"]({router:W,store:Y,render:function(t){return t(u)}}).$mount("#app")},"64a9":function(t,e,a){},"69d4":function(t,e,a){},"6cd6":function(t,e,a){},"6d4a":function(t,e,a){"use strict";var n=a("e9f5"),i=a.n(n);i.a},"706a":function(t,e,a){"use strict";var n=a("ed68"),i=a.n(n);i.a},a168:function(t,e,a){t.exports=a.p+"img/logo.e35acf6a.png"},c30a:function(t,e,a){"use strict";var n=a("69d4"),i=a.n(n);i.a},e9f5:function(t,e,a){},ed68:function(t,e,a){},f074:function(t,e,a){t.exports=a.p+"img/renlian.d855b852.png"},f9c9:function(t,e,a){}});
//# sourceMappingURL=app.3cd28dc0.js.map